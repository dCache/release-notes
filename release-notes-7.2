HTML header: <title>dCache 7.2 Release Notes</title>
             <!--#include virtual="/template/default-head.shtml" -->
             <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
             <!-- Bootstrap -->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
                   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
                   integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
             <!--link type="text/css" rel="stylesheet" href="jquery.tocify.css" /-->
             <style type="text/css">
             h5 {
                 font-size: 15px;
                 font-style: italic;
                 margin-top: 20px;
             }
             body {
                 padding-top: 20px;
             }
             @media (max-width: 767px) {
                 #toc {
                     position: relative;
                     width: 100%;
                     margin: 0px 0px 20px 0px;
                 }
             }
             @media print {
                 #toc {
                     display: none;
                 }
             }
             </style>

<div class="container">
<div id="banner">
   <div id="bird_large">
      <img src="/images/dcache-banner.png" class="bird"></img>
   </div>
   <div id="sidebar-b">
      <span class="dcache-nav-bar">
      <a href="/index.shtml">home</a>
      |
      <a href="/news.shtml">news</a>
      |
      <a href="/manuals/index.shtml">documentation</a>
      |
      <a href="/downloads/IAgree.shtml">downloads</a>
      |
      <a href="/feedback.shtml">feedback</a>
      |
      <a href="/manuals/googlesearch.shtml">search</a>
      |
      <a href="/imprint.shtml">imprint&#160;</a>
      </span>
   </div>
</div>
<div id="content">

<div class="row">

<div class="page-header">
<h1>What's new in dCache 7.2<br/>
<small>Release notes</small></h1>
</div>

## Highlights

This version introduces a quota system and support for file labels.
Support for a dedicated scheduling strategy for bring-online requests was added to SRM-Manager.

## Incompatibilities

This release doesn't have any incompatibilities.

## Release 7.2.19

### frontend, bulk

Both numeric and string values for PIN lifetime are
valid now. Also, skipDirs for DELETE can be both boolean and string.
All other current arguments are required to be strings, as before.

### Changelog 7.2.18..7.2.19

<!-- git log 7.2.18..7.2.19 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[176420e31e](https://github.com/dcache/dcache/commit/176420e31e96b3023d2dfff78a277fafe545e4ca)
:   [maven-release-plugin] prepare release 7.2.19

[cd28af3b31](https://github.com/dcache/dcache/commit/cd28af3b313e4c6a10e2d4cffb561c6c2367006b)
:   dcache-frontend,bulk: fix typing of argument values

[81a032acaf](https://github.com/dcache/dcache/commit/81a032acaf7f9ad31ba7a1076869e1e3b2e387ff)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.18

### frontend

Anonymous access receives a 401 error and doesn't trigger a stack-trace
when unlimitedVisibility is set to false.

clearOnSuccess, clearOnFailure and cancelOnFailure can have boolean and string values now.

### pool

A bug is fixed where the checksum calculation would fail for empty
files.


### Changelog 7.2.17..7.2.18

<!-- git log 7.2.17..7.2.18 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[d822ccf0a8](https://github.com/dcache/dcache/commit/d822ccf0a80b03aa5abbb780bb444bdeafcc59a2)
:   [maven-release-plugin] prepare release 7.2.18

[67055873da](https://github.com/dcache/dcache/commit/67055873daabf07c0b76cc58f8a4b11ae6321fac)
:   dcache-frontend: protect against RuntimeError in case of denied anonymous access

[cd88da4c98](https://github.com/dcache/dcache/commit/cd88da4c9809ccc9f2de1750178d5847d3509a46)
:   restore inadvertently removed 'target' extraction in toBulkRequest()

[51291bfc85](https://github.com/dcache/dcache/commit/51291bfc857af2676796ac3ab924d6377f94c57d)
:   dcache-frontend: bulk-requests POST, allow either string or boolean for boolean values

[56e2b54a5f](https://github.com/dcache/dcache/commit/56e2b54a5f166b4c52cd0c23d7b0054078e6b65b)
:   pool: don't treat an empty file as a sparse file

[d92924806c](https://github.com/dcache/dcache/commit/d92924806c04aa16ef7ccda748ddcb579ba0c77f)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.17

### ChimeraVfs

This release restores the ability to modify file levels.

### info

The delay between messages sent by info was increased to reduce log messages of "DGA {...} triggering too quickly".

### pool

If the scrubber state file is empty, scrubber will now log a more
helpful error message and proceed scrubbing the pool.


### Changelog 7.2.16..7.2.17

<!-- git log 7.2.16..7.2.17 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[617359eb22](https://github.com/dcache/dcache/commit/617359eb2213d90bfe83f2c3e913aae174116c9b)
:   [maven-release-plugin] prepare release 7.2.17

[0fb0b3bdbc](https://github.com/dcache/dcache/commit/0fb0b3bdbcc67ffc461216d084d097f1a8422923)
:   pool: improve handling empty saved state by scrubber

[d9b3dff4ef](https://github.com/dcache/dcache/commit/d9b3dff4efa92df66fc8c767593cec3dff491f0f)
:   dcache-xroot,pom.xml: bump xrootd4j to 4.3.1

[ed50d1efee](https://github.com/dcache/dcache/commit/ed50d1efee708cac043eb775e933404f632fc74d)
:   dcache-xroot: flesh out channel inactive and exception caught

[6a2daf6b18](https://github.com/dcache/dcache/commit/6a2daf6b18c10c1c2c7bc4b6811a4849bf37a89c)
:   info: increase delay between messages

[44c356058a](https://github.com/dcache/dcache/commit/44c356058a03114746aa80e45aa65b58e3f6ebf5)
:   ChimeraVfs: Check file level in addition to inode type when disallowing file size change

[cfcd34c4e7](https://github.com/dcache/dcache/commit/cfcd34c4e796335db8c27de34f5b7b2206402174)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.16

### dcache

Improved documentation for kafka Producer  properties.


Improved error message for inexistent statistics path.

### dcache-xroot

The current relase Updated master xrootd4j to 4.3.0.


### frontend

NPE is fixed when SRR when space information is not available yet.

### xrootd

Rendezvous TPC without requiring a JWT token to be passed
by the third-party client is possible (again).


### Changelog 7.2.15..7.2.16



[ca1438defe](https://github.com/dcache/dcache/commit/ca1438defed83dd7f25b84d633c9c230729775e7)
:   [maven-release-plugin] prepare release 7.2.16

[3fec613542](https://github.com/dcache/dcache/commit/3fec6135426e0d0495ad21c3a8bfd64fb38274f6)
:   dcache:improve documentation for kafka properties

[93d7afab92](https://github.com/dcache/dcache/commit/93d7afab92bedd6f2e9abfbf147e205836b6cd03)
:   dcache-xrootd: fix TPC rendezvous to work with token authorization

[b7193551e7](https://github.com/dcache/dcache/commit/b7193551e7804f3d09fad7936929c70f44d7c7fe)
:   frontend: fix NPE in SRR when space information is not available yet.

[149ea52085](https://github.com/dcache/dcache/commit/149ea52085c49bbc015a979e8e3093282ca8c187)
:   dcache-xroot: update master xrootd4j to 4.3.0, and stable branches to next minor version

[4201b7274b](https://github.com/dcache/dcache/commit/4201b7274bf29d2d5e50cf4b0b61dcb54383687c)
:   dcache-core: improve error message for inexistent statistics path

[ee4183d2c1](https://github.com/dcache/dcache/commit/ee4183d2c1e27b8f6350cacdba0f03344ce0de02)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.15

### script

Direct deprecation warnings are now redirected to stderr.


### Changelog 7.2.14..7.2.15

<!-- git log 7.2.14..7.2.15 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[79444b8bc1](https://github.com/dcache/dcache/commit/79444b8bc1234951ec4bdb5f08d5792a021ef6c7)
:   [maven-release-plugin] prepare release 7.2.15

[2bcb871750](https://github.com/dcache/dcache/commit/2bcb8717503c292e0872606a1c98e7ab079aaf40)
:   info: fix broken unit-test, remove redundant one

[1636a3ea95](https://github.com/dcache/dcache/commit/1636a3ea95459d14dfd455a2e0b3db9e0ce66cf8)
:   dcache script: redirect deprecation warning to stderr

[39302d27c4](https://github.com/dcache/dcache/commit/39302d27c439e2029b47d4c29c3b860e6f2720ae)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.14

### pnfsmanager

Doors no longer allow a user to discover whether or not a file or
directory exists within directories they cannot access.

### pom

Updated spring libs to version 5.2.20, CVE-2022-22965

### pool

The pool now provides more information when a migration job was
cancelled.


### Changelog 7.2.13..7.2.14

<!-- git log 7.2.13..7.2.14 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[a18f2adb33](https://github.com/dcache/dcache/commit/a18f2adb33807df61a011a015e0a418932ff3b45)
:   [maven-release-plugin] prepare release 7.2.14

[b95737de1e](https://github.com/dcache/dcache/commit/b95737de1ec0b19a4d76e237dc168dcda9653e96)
:   pom: update spring libs to 5.2.20

[f4c804724c](https://github.com/dcache/dcache/commit/f4c804724c52aeac6d7f3786a9504289afa70ecd)
:   pool: describe why migration job was cancelled

[e9ee3233ae](https://github.com/dcache/dcache/commit/e9ee3233aef6427a68ca037167e48ba26b428f08)
:   pnfsmanager: avoid leaking whether or not file exists

[e263b9ace3](https://github.com/dcache/dcache/commit/e263b9ace3981fa1eeb99e8a4b5b985826dc57ba)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.13

### dcache-xroot

A ZTN token can now be given without further downstream
tokens expressed, and full authorization of the subject
will take place.


### Changelog 7.2.12..7.2.13

<!-- git log 7.2.12..7.2.13 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[c13043a222](https://github.com/dcache/dcache/commit/c13043a22254620afe120da29a3aa709d4afdb0f)
:   [maven-release-plugin] prepare release 7.2.13

[5997a85b01](https://github.com/dcache/dcache/commit/5997a85b012f66ccab03b4917aaf790a888633e3)
:   dcache-xroot: Allow ZTN authentication to function as fallback authorization

[32d04ceb3d](https://github.com/dcache/dcache/commit/32d04ceb3de8d9778aeeb2649c153c52baa4966a)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.12

### dcache-chimera

Cleaner batch delete exception has been fixed.


Chimera shell support has been added for getting, adding and removing sha1, sha156 and sha512 valued checksums.

User's guid has been updated.

### dcache-core

Sha-1 checksums can and must now correctly be requested as sha, as defined by RFC 3230.

### frontend

A bug is fixed that inverted the property `frontend.srr.public=true`.
True means now `allow public access` and false does not.

### nfs

user subject always available in the processing thread.

### srr


LinkLocal address will not be  published.

### util

nfs door has been updated  to map broken file to IO error.


### Changelog 7.2.11..7.2.12

<!-- git log 7.2.11..7.2.12 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f833efb11a](https://github.com/dcache/dcache/commit/f833efb11ab28e58d07580bae4a0e8b52e5903cb)
:   [maven-release-plugin] prepare release 7.2.12

[2c2c48baf2](https://github.com/dcache/dcache/commit/2c2c48baf22ccf286eef56097653f4a752ea4810)
:   srr: don't publish link local addresses (v2)

[ee246b02a1](https://github.com/dcache/dcache/commit/ee246b02a1122708622dbbca52cdf136af060801)
:   util: treat broken file as unrecoverable error in Trnasfer class

[f498803529](https://github.com/dcache/dcache/commit/f498803529c3ef74a99c56e1eab2d6b3f4f499b0)
:   nearline-storage: fix request count on error path in AbstractRequest#failed

[e00ac992b4](https://github.com/dcache/dcache/commit/e00ac992b4864e6a85b2e4bd676466a9b9bdb52f)
:   nearline-storage: fix queued count when request initialization falied

[da08b097eb](https://github.com/dcache/dcache/commit/da08b097eb013d43ba7a9065eb9f355d55376c02)
:   pool: add bunch of unit tests for NearlineStorageHandlerTest

[8fede904e3](https://github.com/dcache/dcache/commit/8fede904e3bedf5852e07b9886a42b01ef5e8e6e)
:   UserGuide: describe supported checksums, add example including sha

[62757d2630](https://github.com/dcache/dcache/commit/62757d2630cc7b2b69af702bb04ebc289a723a6d)
:   frontend: fix problem with making SRR resources public

[3a1cb7e1ff](https://github.com/dcache/dcache/commit/3a1cb7e1ff8b0b7710e85ef06c46a2eafe72b2fa)
:   dcache-chimera: add sha checksum commands to chimera shell

[9f04c91f51](https://github.com/dcache/dcache/commit/9f04c91f5103638834fe95ab4dd89c8a21f98652)
:   dcache-core,common: fix user having to request `sha-1`, not `sha`

[6a3c3e30a1](https://github.com/dcache/dcache/commit/6a3c3e30a152b73d3f748944bec36de2aeeb45e9)
:   nfs: enforce subject propagation on RPC level

[f6e1075015](https://github.com/dcache/dcache/commit/f6e1075015425a2b0db585419843eac7dbed153c)
:   dcache-chimera: fix cleaner batch delete exception

[0e7f23bc05](https://github.com/dcache/dcache/commit/0e7f23bc056d0c3b9293ad85bce654f60b837c80)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.12

### dcache-chimera

Cleaner batch delete exception has been fixed.


Chimera shell support has been added for getting, adding and removing sha1, sha156 and sha512 valued checksums.

User's guid has been updated.

### dcache-core

Sha-1 checksums can and must now correctly be requested as sha, as defined by RFC 3230.

### frontend

A bug is fixed that inverted the property `frontend.srr.public=true`.
True means now `allow public access` and false does not.

### nfs

user subject always available in the processing thread.

### srr


LinkLocal address will not be  published.

### util

nfs door has been updated  to map broken file to IO error.


### Changelog 7.2.11..7.2.12

<!-- git log 7.2.11..7.2.12 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f833efb11a](https://github.com/dcache/dcache/commit/f833efb11ab28e58d07580bae4a0e8b52e5903cb)
:   [maven-release-plugin] prepare release 7.2.12

[2c2c48baf2](https://github.com/dcache/dcache/commit/2c2c48baf22ccf286eef56097653f4a752ea4810)
:   srr: don't publish link local addresses (v2)

[ee246b02a1](https://github.com/dcache/dcache/commit/ee246b02a1122708622dbbca52cdf136af060801)
:   util: treat broken file as unrecoverable error in Trnasfer class

[f498803529](https://github.com/dcache/dcache/commit/f498803529c3ef74a99c56e1eab2d6b3f4f499b0)
:   nearline-storage: fix request count on error path in AbstractRequest#failed

[e00ac992b4](https://github.com/dcache/dcache/commit/e00ac992b4864e6a85b2e4bd676466a9b9bdb52f)
:   nearline-storage: fix queued count when request initialization falied

[da08b097eb](https://github.com/dcache/dcache/commit/da08b097eb013d43ba7a9065eb9f355d55376c02)
:   pool: add bunch of unit tests for NearlineStorageHandlerTest

[8fede904e3](https://github.com/dcache/dcache/commit/8fede904e3bedf5852e07b9886a42b01ef5e8e6e)
:   UserGuide: describe supported checksums, add example including sha

[62757d2630](https://github.com/dcache/dcache/commit/62757d2630cc7b2b69af702bb04ebc289a723a6d)
:   frontend: fix problem with making SRR resources public

[3a1cb7e1ff](https://github.com/dcache/dcache/commit/3a1cb7e1ff8b0b7710e85ef06c46a2eafe72b2fa)
:   dcache-chimera: add sha checksum commands to chimera shell

[9f04c91f51](https://github.com/dcache/dcache/commit/9f04c91f5103638834fe95ab4dd89c8a21f98652)
:   dcache-core,common: fix user having to request `sha-1`, not `sha`

[6a3c3e30a1](https://github.com/dcache/dcache/commit/6a3c3e30a152b73d3f748944bec36de2aeeb45e9)
:   nfs: enforce subject propagation on RPC level

[f6e1075015](https://github.com/dcache/dcache/commit/f6e1075015425a2b0db585419843eac7dbed153c)
:   dcache-chimera: fix cleaner batch delete exception

[0e7f23bc05](https://github.com/dcache/dcache/commit/0e7f23bc056d0c3b9293ad85bce654f60b837c80)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.11

### Changes affecting multiple services

The OIDC 'sub' (subject) and 'jti' (JWT ID) claims are logged to
access log file for WebDav, frontend and SRM doors if OIDC is used.

### admin-shell

Fix the line termination printed to console. It's `\r\n` now.

### bulk

dCache now returns 404 instead of 403 if a submitted id in GET or PATCH
bulk-request is not recognized by the service.

Jobs which originally got stuck in STARTED state now complete;
their failure information contains the reason for premature
completion.

### frontend

The property `frontend.srr.public=true|false` is added to
frontend to control SRR resource restriction. The default
value is false.

### ftp

The FTP cell is killed asynchronously now after the session terminates
so the door will remain responsive when many clients terminate their
FTP session concurrently.

### pool

HTTP-TPC transfers now prefer IPv6 address, if both endpoints support
it.

If a HSM script survives SIGTERM it will now be stopped
with SIGKILL and a warning is logged. This reduces expired
or canceled requests staying in CANCELED state.

If a NFS mover is killed twice it's now logged without a stack trace.
This provides more stable NFS error recovery, too.


### Changelog 7.2.10..7.2.11

<!-- git log 7.2.10..7.2.11 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[abafc5e050](https://github.com/dcache/dcache/commit/abafc5e05052e980b71e2c589c16414af3dac712)
:   [maven-release-plugin] prepare release 7.2.11

[2328d630e4](https://github.com/dcache/dcache/commit/2328d630e42c029b53b15ab8afad4d4c0420332d)
:   frontend: make srr resources public

[f3f48d6e65](https://github.com/dcache/dcache/commit/f3f48d6e65ccfa314943ef73fc8476cf56152f89)
:   webdav/frontend/srm/gplazma: log OIDC 'sub' and 'jti' claims

[7653bc78df](https://github.com/dcache/dcache/commit/7653bc78df6ae770c0b5db21b4ac1291734c1e57)
:   ftp: kill cell asynchronously

[b2de5dcdcd](https://github.com/dcache/dcache/commit/b2de5dcdcd66c2cd3870e63a628a18b13f974a67)
:   pool: http-tpc prefer IPv6 address

[bd807f0da4](https://github.com/dcache/dcache/commit/bd807f0da4de10cf8b75b7e6c7b024221ae73b73)
:   pool: handle multiple shutdowns of a nfs mover

[3607a08821](https://github.com/dcache/dcache/commit/3607a08821a8adafeba2fdb1f9b68e251fae18b5)
:   dcache-bulk: aborted request gets stuck in the STARTED state

[dc2a01fea6](https://github.com/dcache/dcache/commit/dc2a01fea69078e05a28d4cca36118ae29cf3511)
:   pool: try to forcefully kill HSM process if needed

[8fbab1884e](https://github.com/dcache/dcache/commit/8fbab1884e9c199f4bb0082d489db99afb252d14)
:   admin shell: fix line termination in SshOutputStream

[e858de6448](https://github.com/dcache/dcache/commit/e858de6448478d15fc5a0c1952dac4e7ac8f0e9a)
:   [maven-release-plugin] prepare for next development iteration

[0970afbe2d](https://github.com/dcache/dcache/commit/0970afbe2d0f7a6d746355397e5053967ff24e48)
:   bulk, frontend-rest: return 404, not 403, when request id does not exist

## Release 7.2.10

### common


The current release fixed certificate reload when updated.

There are places where dCache configuration requires an absolute path.
In some places attempting to use a relative path will yield an unhepful
`null` in the log file. This is now fixed, so a meaningful error
message is logged instead.

### pool

An NPE  on attempt by client to read from a broken replica is fixed now.

### rest

### webdav

The current release fixed handling of `webdav.authz.allowed-paths` so it no longer triggers a
NullPointerException.


### Changelog 7.2.9..7.2.10

<!-- git log 7.2.9..7.2.10 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[034deb4042](https://github.com/dcache/dcache/commit/034deb40428ca92120a3cf28a7f10fc8ac2e2e66)
:   [maven-release-plugin] prepare release 7.2.10

[bfff8d424f](https://github.com/dcache/dcache/commit/bfff8d424f2d47ee5bc964a6effea4ee527451c8)
:   webdav: fix NPE if 'webdav.authz.allowed-paths' disallows a request

[16f7723398](https://github.com/dcache/dcache/commit/16f7723398fb21568d50073bcb19f1ec98280181)
:   common: provide reasonable error message if path is not absolute

[55cfd70b30](https://github.com/dcache/dcache/commit/55cfd70b30a2601c90f0850ff78f8cf93d9deb6c)
:   pool: fix NPE on attempt by client to read from a broken replica

[1de476bd75](https://github.com/dcache/dcache/commit/1de476bd75f0b6f8d901d006419f3d6502135505)
:   common-security: re-read server credentials on context re-creation

[9afb28cf3e](https://github.com/dcache/dcache/commit/9afb28cf3ea8b2c3d12713076e6571b41f34ae3c)
:   rest api: add checksum parameter to namespace resource

[65359b538f](https://github.com/dcache/dcache/commit/65359b538f3cfce564427007ba2acbb655253735)
:   [maven-release-plugin] prepare for next development iteration


## Release 7.2.9

### Pool 

The current relase fixed a problem where a file's tape location that used to exist in the
namespace and was subsequently removed can reappear if the file made
precious and flushed to tape.


### TransferManager

TransferManager  now logs bugs with the corresponding stack-trace,
making fixes any such bug easier.

### dcahe-core
When asking for count pins `unpin-failed`, only report the number of pins in state `FAILED_TO_UNPIN` and not `PINNING`.


### srm-server
Now log `trs tape queue` states when tape requests are added.



### Changelog 7.2.8..7.2.9

[3f78e6f5b7](https://github.com/dcache/dcache/commit/3f78e6f5b7231444852d8f4543b68041ccb65717)
:   [maven-release-plugin] prepare release 7.2.9

[3eb7542a49](https://github.com/dcache/dcache/commit/3eb7542a493f4569157b9061c0cc8e4722bee5c3)
:   CopyManager: reply success when the target transfer completes.

[e41bd289b0](https://github.com/dcache/dcache/commit/e41bd289b04e5257658f034f9e1931a3a7d478a5)
:   frontend: update dCacheView to v2.0.2

[9b38e4fba2](https://github.com/dcache/dcache/commit/9b38e4fba2a766dedc1256d5c27536d3a6e24f3d)
:   pool: only send new URLs when flushing file

[dea284457d](https://github.com/dcache/dcache/commit/dea284457d7ddd1d46f602f68ed5aec48b11e00f)
:   TransferManager: log bugs with corresponding stack-trace

[255ba86249](https://github.com/dcache/dcache/commit/255ba862491d55daed666e0489b9cee36eb52eb7)
:   dcache-core: fix admin command to query pins by state

[2fc6ff0406](https://github.com/dcache/dcache/commit/2fc6ff040604b9a2438377e0bc1515a1c318adb2)
:   srm-server: log trs tape queue states when tape requests are added

[3268e0ace8](https://github.com/dcache/dcache/commit/3268e0ace84d19e7766e9a4c94351adee693ef3b)
:   readme: Remove newline at the end

[8356c837d4](https://github.com/dcache/dcache/commit/8356c837d44caaf4691a6d9505e7ea63a31e50df)
:   Update config-xrootd.md

[6458b47484](https://github.com/dcache/dcache/commit/6458b474846b46fb21d1f05998a8a573baaa466e)
:   Update config-xrootd.md

[2e124bb413](https://github.com/dcache/dcache/commit/2e124bb413e7da6310931443a2ab59562c826c00)
:   book: Add chapter about telemetry cell

[68ade2a7e0](https://github.com/dcache/dcache/commit/68ade2a7e0a9892fce3b45909fa80aa70ed00ca7)
:   [maven-release-plugin] prepare for next development iteration



## Release 7.2.8

### dcacheview

This patch introduces some improved icons and other minor visual tweaks.

### gplazma

The 'scitoken' gplazma plugin will now accept WLCG AuthZ tokens without
direct authorisation statements.  When accepting such a token, the
plugin refrains from adding any of the additional principals from the
configuration property; only the principals directly from the token are
added.

dCache will now reject WLCG-AuthZ-JWT profile tokens with a 'wlcg.ver'
claim that it does not support. Other tokens (e.g., SciTokens) are
unaffected by this change.

The token-based authentication gPlazma plugins (scitoken, oidc) now
include the identity of the OP that created the token. The multimap
plugin is updated to support matching on this principal.

### loginbroker

This patch fixes SRM based upload or download where the client requests an
xroot-based transfer. The SRM door will now also consider any xroot
door with xrootd.security.tls.mode configured to OPTIONAL when
building a TURL targeting either xroot or xroots protocols.

### pnfsmanager

PnfsManager now has two commands, 'reset chimera stats' and 'reset stats',
to support resetting the gauge and counter statistics available through
the 'info' command.

dCache no longer leaks information about whether or not files exist when
using macaroons or Scitokens / WLCG AuthZ JWT profile tokens.

### webdav

The WebDAV door cannot send the HTTP response to some HTTP request if
the client has already disconnected. dCache no longer logs an error
that it cannot send the HTTP response.

A client that disconnects during a proxied HTTP transfer (GET or PUT) is
no longer logged in the WebDAV door's log file; instead, it is logged in
the cell's pinboard. The billing message is updated to make it clearer
what went wrong.

### webdav, transfermanager

dCache provides marginally better performance for HTTP-TPC, which starts
to become significant when transferring many small files.


### Changelog 7.2.7..7.2.8

<!-- git log 7.2.7..7.2.8 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6351804eb5](https://github.com/dcache/dcache/commit/6351804eb51b0aff1c3bd207e260e5a1ef7c604c)
:   [maven-release-plugin] prepare release 7.2.8

[63e035cfd6](https://github.com/dcache/dcache/commit/63e035cfd6cfc054fb49b6ea36fc805dbc991691)
:   gplazma: scitoken fix/improve support for group-based AuthN in WLCG profile

[304bc36936](https://github.com/dcache/dcache/commit/304bc36936298bf4e8bc5b352b53f5c5817b14f0)
:   gplazma: scitoken/oidc/multimap add support for OP principal

[3b7d463834](https://github.com/dcache/dcache/commit/3b7d4638348698966a21e0f15a0a28138c3c5e25)
:   skel: bump logback to 1.2.10

[8534813023](https://github.com/dcache/dcache/commit/85348130231d2e73d6ca79963cf1976a35efdecb)
:   pnfsmanager: add support for resetting gauge and counter statistics

[8229fc9eb8](https://github.com/dcache/dcache/commit/8229fc9eb85975eff75b7c94ff5cc01fa46f239a)
:   loginbroker: add support for multiple protocol families

[61e47caa89](https://github.com/dcache/dcache/commit/61e47caa89ae5acc40793161ee28b56688ff4816)
:   dcacheview: upgrade to dCacheView 2.0.1

[55f999ccb6](https://github.com/dcache/dcache/commit/55f999ccb62d2aa62807b59d682f5bf54e126679)
:   webdav/transfermanager: skip PnfsManager lookup if possible

[05bede5d29](https://github.com/dcache/dcache/commit/05bede5d290d4ce0217d40a274f1a4e30a089d59)
:   webdav: better logging if client disconnects during proxied transfer

[ebbc63ddfb](https://github.com/dcache/dcache/commit/ebbc63ddfb43e9ac1962ed0a8c1c7823e3702184)
:   webdav: don't log an error if client disconnects before response sent

[dc1dc553c0](https://github.com/dcache/dcache/commit/dc1dc553c0206e0614cf525dc565be04de359026)
:   PnfsManager: check restrictions before resolving path to PNFS-ID

[bf0ef165a3](https://github.com/dcache/dcache/commit/bf0ef165a39879eb4b87a6abfd87af8455667571)
:   gplazma: scitoken validate 'wlcg.ver' claim

[a2945ee543](https://github.com/dcache/dcache/commit/a2945ee54313ead3cc556589ea3703ac6b7b5894)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.7

### common-security

A better error message is logged when attempting to use a password-protected credential:
`java.io.IOException: Error decrypting private key: the password is incorrect or the PEM data is corrupted.`

### nfs

With this change, pool doesn't enter an infinite retry loop if staging is not allowed on this pool.

### pnfsmanager

Files written directly by encp (Enstore) can be read by dCache again.
The revert cost 5% in performance on write. We will try to address the performance hit asap.

### pool

This patch introduces the flag `-noheader` for use with `rep ls -s`
that produces output similiar to what we used to see in previous
dCache releases. In addition, a bug is fixed that prevented printing
of precious and sticky file counts.

Pool statistic files are now copied without throwing an exception.

### webdav

The HTTP-TPC should have fewer failed transfers when faced with many
short-lived transfers.

It's now possible to access a summary of HTTP-TPC transfers and
configuration information via the WebDAV door's info admin command.


### Changelog 7.2.6..7.2.7

<!-- git log 7.2.6..7.2.7 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[21d84be630](https://github.com/dcache/dcache/commit/21d84be630cd8c2efe3d6d5b07419f41d8426114)
:   [maven-release-plugin] prepare release 7.2.7

[a1a9a31503](https://github.com/dcache/dcache/commit/a1a9a315030311a3d03f4f2781bd88fdb54a5acc)
:   common-security: prevent NPE on password protected cert

[ee04084970](https://github.com/dcache/dcache/commit/ee04084970ca47d138af59d0da1c99c94b832020)
:   webdav: http-tpc update heuristics for failing transfer

[5d53d308e7](https://github.com/dcache/dcache/commit/5d53d308e775df0ac50ab9ae14e96e634c0b7855)
:   Remove double whitespaces

[9c202de000](https://github.com/dcache/dcache/commit/9c202de00071c04ae764edc01c836bdd8161e18a)
:   chimera/pnfsmanager: restore compatibility with Enstore - restore ability to read files written directly by encp (Enstore client).

[57bc507924](https://github.com/dcache/dcache/commit/57bc5079246be1119ac9c5e4364ba0cf3710314a)
:    nfs: propagate `permission denied` on stage requests

[699da511b4](https://github.com/dcache/dcache/commit/699da511b49fabab7f763b794c28ed3824815b48)
:   webdav: http-tpc provide status information in 'info' admin command

[1c2771773b](https://github.com/dcache/dcache/commit/1c2771773b9b4d61b5648c74f48e205e81d92883)
:   pool: fix rep ls formating

[1f6b78d7b5](https://github.com/dcache/dcache/commit/1f6b78d7b5841821d694ebdc8fddc735d952ee34)
:   pool: fix pool statistic file overwrite option

[6cec90347f](https://github.com/dcache/dcache/commit/6cec90347fe6cb242281b987bbb8b895f3741c8c)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.6

### core


Macaroons created with both a "path" caveat and "root" caveat work as
expected.

### dcache

The RemoteTransferManager now  better describes the current state of a
transfer.

### gplazma

The `scitoken` gplazma plugin now supports extracting the `sub` and
`wlcg.groups` claims in the same fashion as the `oidc` plugin.

### pool


The current release fixed open queue flag when template defined by `queue define class` issue.

### webdav


The WebDAV door's `http-tpc ls` command now has the possibility to show
the current state of the transfer. This may be useful diagnosing
transfers spending a lot of time deciding on which pool to transfer
should take place.


Macaroon requests with a path in the request URL and with a non-default
door root now generate correct macaroons. WebDAV doors with '/' root
are unaffected by this problem.


### Changelog 7.2.5..7.2.6

<!-- git log 7.2.5..7.2.6 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6e3816cb12](https://github.com/dcache/dcache/commit/6e3816cb123f43f4eb11c24e1ebc19c3cf21c967)
:   [maven-release-plugin] prepare release 7.2.6

[5a0e179a94](https://github.com/dcache/dcache/commit/5a0e179a94f8354d4137aff59be60c4450154a8b)
:   RemoteTransferManager: update state description

[32da6ef8ef](https://github.com/dcache/dcache/commit/32da6ef8ef482731cb5a8e5a509ccb57b1d65333)
:   webdav: http-tpc add "prep" duration to 'http-tpc ls' command

[04933fa957](https://github.com/dcache/dcache/commit/04933fa957ed670ec8d1a686417dbeb8e479bdac)
:   webdav: http-tpc show whether transfer is queued on pool

[1ffdd14c44](https://github.com/dcache/dcache/commit/1ffdd14c44b14689643926b9bd01c8749f9b1a8b)
:   webdav: http-tpc update 'http-tpc ls' command to include state

[e4ac684b4c](https://github.com/dcache/dcache/commit/e4ac684b4c6d7e74ab4464569fab6d9814ba49a1)
:   glazma: scitoken add support for additional principals

[7333b9c923](https://github.com/dcache/dcache/commit/7333b9c92331694c3ce4103bc29c83c4e5327bf9)
:   srr: limit publisched endpoints to GLOBAL scope

[59e00cd64b](https://github.com/dcache/dcache/commit/59e00cd64bba2ccae4ebec29fd85fc789813d317)
:   core: fix macaroon behaviour with root and path

[03011c2abe](https://github.com/dcache/dcache/commit/03011c2abe2265847736ccf5628c9b8617b2f0e0)
:   webdav: ensure URL-path request macaroon have relative "path" caveat

[e777580ad2](https://github.com/dcache/dcache/commit/e777580ad2cd5c55bf12e4e3f909352dd8d943fb)
:   pool: fix open queue flag when template defined by `queue define class`

[b28ba03f8e](https://github.com/dcache/dcache/commit/b28ba03f8e212e775528acd809b04f5870145299)
:   srm-server: trs don't cache tape names forever

[bda7d82b0a](https://github.com/dcache/dcache/commit/bda7d82b0a449fbe77578393ddbc49b5cf06277f)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.5

### dcache-core

The current release fixed  NPE in TransferManager when no pool was selected before transfer is cancelled.

### frontend

The current release fixed handling of SRR requests over IPv6.

### gplazma

The scitoken plugin now supports OPs that publish their public keys
without any corresponding ID (i.e., no kid value).

### nfs

nfs can  write into space reservations now.

### pinmanager

A more detailed pinmanager log entry is provided for pin requests that
are caught in a retry loop, and eventually time out.

### resilience

A runtime exception triggered by side effect of logging has been fixed.

### storagedescriptor

The script for generating SRR records (from the info service output) has
been updated. The field `lastupdated` has been adjusted to the correct
name `latestupdate`.

### webdav

A bug is fixed where HTTP-TPC PULL request can fail (under heavy load)
with the downloaded file being deleted, but dCache reports the transfer
as successful.

dCache now  provides a faster respones to the HTTP-TPC client (typically FTS)
should the door decide to fail a transfer.

The WebDAV door should be now  faster at accepting new transfers and faster
at handling transfer completions when handling many small transfers.


The HTTP-TPC support in the WebDAV door is now e more robust to high
number of transfers finishing concurrently.


### xroot

Now it is possible to support kXR_delete as a write request on the pool.

### xrootd4j

Library updates for xrootd4j which contains fix for Unix Protocol.

### Packaging

Starting from dcache-7.2.5 the rpm package includes `rsyslog` configuration to produce classic log files in `/var/log/dcache` directory in addition to
journal entries. To enable the logging into files the `/etc/systemd/journald.conf` should be configured as:

```
ForwardToSyslog=yes
```

### Changelog 7.2.4..7.2.5

<!-- git log 7.2.4..7.2.5 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[90ec3b60fe](https://github.com/dcache/dcache/commit/90ec3b60fe8dd99b81853e81e85e7bf69b5607d4)
:   [maven-release-plugin] prepare release 7.2.5

[999fee1296](https://github.com/dcache/dcache/commit/999fee12963e5a0da9cf015ab70da22f669f7e9b)
:   webdav: http-tpc improve throughput with short transfers

[071e6914eb](https://github.com/dcache/dcache/commit/071e6914ebaa9f779c05fe1b86ee079cbfb5b368)
:   frontend: fix handling of SRR requests over IPv6

[b9ff1db9e6](https://github.com/dcache/dcache/commit/b9ff1db9e69373d1788d33fc668c80dff3a5293f)
:   rpm: include default rsyslog configuration

[36c108d0de](https://github.com/dcache/dcache/commit/36c108d0dea58925e074155d05d18d31bcbeac12)
:   webdav: http-tpc don't wait if door fails transfer

[5a49c6a506](https://github.com/dcache/dcache/commit/5a49c6a5067336e1affe3399694e1f21d955cf94)
:   webdav: http-tpc avoid resetting transfer state

[7794d6bdb2](https://github.com/dcache/dcache/commit/7794d6bdb288a1e51a8f8bbdebe907f88480b9f9)
:   dcache-core: fix NPE in TransferManager when no pool was selected before transfer is cancelled

[02244c83dc](https://github.com/dcache/dcache/commit/02244c83dc72824ca034086264ea27cce0e89e9c)
:   resilience: fix runtime exception triggered by side effect of logging

[59d5c6fa99](https://github.com/dcache/dcache/commit/59d5c6fa9957ac113f61c400825b1b14f433f195)
:   gplazma: scitoken add support for OPs that advertise keys without kid

[417d0d9616](https://github.com/dcache/dcache/commit/417d0d96160fab558db67b530b86272b822291b5)
:   nfsv: convert UnixNumericXxxPrincipal into dCache analogs

[f5b0e71449](https://github.com/dcache/dcache/commit/f5b0e71449db361c742822b77a54abbbf72748c9)
:   webdav: http-tpc move transfer finalisation off of message queue

[183a51bed6](https://github.com/dcache/dcache/commit/183a51bed6fc34638b79915c748e25c5fb63c059)
:   pom.xml: update xrootd4j dependencies to 4.2.5/4.1.6/4.0.11

[8e382cea4f](https://github.com/dcache/dcache/commit/8e382cea4f6b6274b0601c092f3e13315b1ccfe3)
:   CanlContextFactory: throw FileNotFound for missing ca certs dir

[a5ce12b212](https://github.com/dcache/dcache/commit/a5ce12b212706c5e1a5a859e91fdbabee0a66c7d)
:   pinmanager: provide more details information on timeout

[6e5981526b](https://github.com/dcache/dcache/commit/6e5981526b798c41dcf68aea4e37567fb6b082c4)
:   storagedescriptor: fix element name to 'latestupdate'

[d874e60106](https://github.com/dcache/dcache/commit/d874e601062b3bd36470830734e1788f43f81082)
:   dcache-xroot: support kXR_delete as a write request on the pool

[184152bba0](https://github.com/dcache/dcache/commit/184152bba013db20fb9c5e771bad3fca88cd93f4)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.4

### bulk

The way Bulk handles pin requests was changed to provide greater
throughput and reliability.

### ftp

The FTP door now provides more succinct information on pinboard, should
use less CPU and take better advantage of the available cores.

### libraries

The canl version was updated to version 2.6.0 to fix a bug that made
dCache no longer accept certificates issued by a trusted CA after that
CA updated their CA certificate while keeping the public/private
key-pair the same.

### pnfsmanager

Attempts to create a file where the parent directory is either missing
or not a directory now provide clearer error messages.

### pool

The pool is updated to support stateful NearlineStorage plugins
that can fail during initialisation.

The pool now provides more information for bugs reported as
java.lang.IllegalStateException: Handle is closed.

### webdav

The HTTP-TPC response is improved if a client attempts to pull a file
into a non-existing directory, or attempts to use an existing file as an
ancestor directory.

### xrootd

Improved exception handling for Xrootd.

The xrootd4j version was updated to 4.2.4


### Changelog 7.2.3..7.2.4

<!-- git log 7.2.3..7.2.4 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[7e8bd48424](https://github.com/dcache/dcache/commit/7e8bd4842460ec03432f7b5b6b995c066774b4eb)
:   [maven-release-plugin] prepare release 7.2.4

[9313fad943](https://github.com/dcache/dcache/commit/9313fad94329a1d38fb0ebe748755b9bad6da4c7)
:   pom.xml: update to xrootd4j 4.2.4/4.1.5

[bc5a8c3146](https://github.com/dcache/dcache/commit/bc5a8c3146f93b00d3369a4ddc68b6d61eb1ae0a)
:   libraries: upgrade version of canl

[45c8c8ae7a](https://github.com/dcache/dcache/commit/45c8c8ae7a1def25d25327806556db1d6031acc2)
:   dcache-bulk: fix handling of asynchronous pin requests

[354c514596](https://github.com/dcache/dcache/commit/354c5145967497d0f4121ed0a05c2dcaf4b1608b)
:   dcache-frontend: support different attribute styles for bulk request

[ff1ca76ef4](https://github.com/dcache/dcache/commit/ff1ca76ef479aa423d889efdfe95c0962906ce42)
:   pool: update `NearlineStorage` to allow the `start` method to fail.

[dbd4ca9c7e](https://github.com/dcache/dcache/commit/dbd4ca9c7e438baa7cce8aee2e12df5613221fe2)
:   pool: provide more information when handle is double-closed

[caa67359e8](https://github.com/dcache/dcache/commit/caa67359e805d8a3d8e26b1c70014d5e3d8e2259)
:   dcache-xrootd: Alternate fix for client write to closed checksum channel

[5291aa0316](https://github.com/dcache/dcache/commit/5291aa0316000fbe5b29d82094d25ac98646ee5d)
:   pnfsmanager: fix confusing error message.

[331b056cbc](https://github.com/dcache/dcache/commit/331b056cbc9b1cb20a3ad990fc8b48d6da5083a3)
:   webdav: fix error handling for bad paths

[f7ebd146b3](https://github.com/dcache/dcache/commit/f7ebd146b35f3c5efe213520480c9e315a26448a)
:   ftp: switch to more reasonable logging of Subject

[84467de11c](https://github.com/dcache/dcache/commit/84467de11cbe480fade8a052f757bbb9cf2f0345)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.3

### chimera

Added information to the cleaner admin info output, showing which pools are in the
process of being cleaned.

A bug is fixed that triggered downstream errors when getUid() is called.

### gftp door

The GFTP door was running into out-of-memory errors. This is fixed now.

### frontend

api/v1/namespace/path is extended by adding 'pin' and 'unpin' activities to the POST method.

### frontend, chimera

The behaviour of pin/unpin to api/v1/namespace/path POST was fixed to not remove the qos pin.

### universal-spring-cell

This patch fixes a problem where a call to api/PoolManager returned 404
not found. The JSON serialized object is returned now as before.

### xrootd

The xroot4j version was updated to 4.2.3


### Changelog 7.2.2..7.2.3

<!-- git log 7.2.2..7.2.3 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[90f94d25f3](https://github.com/dcache/dcache/commit/90f94d25f3ba1e9b46cee424488473b89902acbb)
:   [maven-release-plugin] prepare release 7.2.3

[d7eda62d77](https://github.com/dcache/dcache/commit/d7eda62d77b0a41243cad93ff9e10323b46483c7)
:   common-security: revert GSI/FTP to Java SSL

[fbf0c0810e](https://github.com/dcache/dcache/commit/fbf0c0810ed96066e823d6fcf010651ac9ec639f)
:   dcache-frontend,dcache-chimera: fix pin/unpin in REST and NFS to use UID as request id

[7d0c535992](https://github.com/dcache/dcache/commit/7d0c5359920f2af61262d4e57ee896a94e5f6139)
:   srm-server: trs fix logging

[eede36fa09](https://github.com/dcache/dcache/commit/eede36fa0951838ac46c2b61f910c46d23690770)
:   srm-server: trs -- improve tape info fetching

[8b6dcf34f9](https://github.com/dcache/dcache/commit/8b6dcf34f95bdf68152279967286d2b0a2a97345)
:   dcache-chimera: add Unix principal conversion to AccessControlContext subject

[5b250e549e](https://github.com/dcache/dcache/commit/5b250e549e8e3cb97d33ec79a5e70a0304a54634)
:   dcache-chimera: add which pools are being cleaned to cleaner admin info

[4dc9f2b94b](https://github.com/dcache/dcache/commit/4dc9f2b94b2733634b27eb229a11b0a1bebe0592)
:   dcache-frontend: add 'pin' and 'unpin' activities to namespace resource POST method

[a2cf3d8ff2](https://github.com/dcache/dcache/commit/a2cf3d8ff2beedf983da1c082c143062a97efdfb)
:   srm-server: add trs logging

[7624bbccde](https://github.com/dcache/dcache/commit/7624bbccdeccd79679de280eeb34919397cf507d)
:   srm-server: revert unnecessary type change

[61f12b59d8](https://github.com/dcache/dcache/commit/61f12b59d8ceccc584b5cd55566c8a2dd495e9f6)
:   pom.xml: bump to xrootd4j 4.2.3

[3364f25836](https://github.com/dcache/dcache/commit/3364f258364b68cd6b97f1dde0e2f08d264cfcfb)
:   universal-spring-cell: allow for serialization of Optional

[d09ef7f063](https://github.com/dcache/dcache/commit/d09ef7f0633123d8a5050fb27c1775695c699d94)
:   srm-server: trs -- use Optional types, add unit tests

[b5ca9b0b1d](https://github.com/dcache/dcache/commit/b5ca9b0b1d8888860926527e3a5c91b8f252b3e8)
:   [maven-release-plugin] prepare for next development iteration

[324d79bfde](https://github.com/dcache/dcache/commit/324d79bfde9d49f68b63929eec75d930f95e8e23)
:   Update install.md

## Release 7.2.2

### billing


Billing will no longer throw a NullPointerException with certain
information from an NFS door serving an NFSv3 client.



### dcache


Running TPC HTTP(s) transfers with gridsite delegation against
hosts on dual stack noticed this exception:
java.lang.IllegalArgumentException:  '[xxxx:xxxxx:xxx:xxx:fe03:7377]'
is not an IP string literal. this is now fixed

### ftp


Now  file sizes for LIST output in bytes is displayed.



The FTP door should be more robust against a (currently unknown) bug
that results in the ftp session attempting to send progress queries to
the pool after that is no longer possible.




### gplazma



The banfile and scitoken plugins, and the two admin commands test login and explain login are updated to accept the username: prefix
(e.g., username:paul). The prefix user: continues to work but is
now deprecated.

### nfs

An  exception for access check in ChimeraVfs has been fixed.

Tag update regression was fixed.

### pool


The current release improved error messaging if a setup file badly
configures an HSM instance.


A bug is fixed where removing a create hsm statement in a pool's setup
file and running the reload command kills the pool.


### srm-server

NullPointerException when a tape with expired requests does not have an oldest request age value  has been fixed.

### srmclient




The RPM packaging system and related software (e.g,. yum) now
understands that the srm-client package requires java.

### xroot


xrootd4j has been upgraded to 4.2.2 with a fixed  regression introduced into the unix protocol plugin.



The documentation  concerning TLS properties has been fixed.



### Changelog 7.2.1..7.2.2

<!-- git log 7.2.1..7.2.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[a4abef2012](https://github.com/dcache/dcache/commit/a4abef2012021f843935b3116b75e3e38cbfc0ec)
:   [maven-release-plugin] prepare release 7.2.2

[8006da747a](https://github.com/dcache/dcache/commit/8006da747a64b23e0b935ad5c6cfdd7f8024a3ac)
:   srm-server: Fix NullPointerException in SRM TRS

[a8700de057](https://github.com/dcache/dcache/commit/a8700de0571be7b4cea13aa3330dae4e933e6779)
:   nfs: fix tag update regression

[9866499238](https://github.com/dcache/dcache/commit/98664992382308385783fe8ec61f3357078f0607)
:   srmclient: add Java-11 dependency

[df4bc057b3](https://github.com/dcache/dcache/commit/df4bc057b3ab8cfeadbb4d3c380f92b4161096e5)
:   pool: add support for stateful NearlineStorage

[65df64150f](https://github.com/dcache/dcache/commit/65df64150f9b67c77cd7626e249409a2edc6e722)
:   core: update config testing to honour CellLifeCycleAware mocks

[19e6d6c8a2](https://github.com/dcache/dcache/commit/19e6d6c8a2f502bd6a0753bd9d5e4fe60f5c8151)
:   bootstrap: startup can hide bugs

[e19425b263](https://github.com/dcache/dcache/commit/e19425b26311ae7f625ef0b0fe7ab6f7e1ff187f)
:   dcache-xroot, book, skel: fix documentation concerning TLS properties

[556106b7b0](https://github.com/dcache/dcache/commit/556106b7b0052f4401e01b503f1917f1e2c1ee69)
:   bootstrap: fix two problems with how bugs are reported on startup

[c3173860f3](https://github.com/dcache/dcache/commit/c3173860f380936f4f95a743d26b8131927694dd)
:   ftp: try harder to ensure any timer tasks are cancelled

[3b65a4fae7](https://github.com/dcache/dcache/commit/3b65a4fae7bc9a9b35ddcae6ff2d697063005f9a)
:   pool: removing hsm with `reload` command kills pool

[8e18034673](https://github.com/dcache/dcache/commit/8e180346735510ef4b9272e8f7772d5117eabf36)
:   Handle IPv6 address when running HTTP(s) TPC with gridsite delegation

[d7b600c972](https://github.com/dcache/dcache/commit/d7b600c972f134581e4a5d27b1da0c98cb6ec29a)
:   Auto create table for TransferManager persistency

[e0c8816ffd](https://github.com/dcache/dcache/commit/e0c8816ffda8b2384f64a0bcb45efdcbd687f958)
:   gplazma: switch from `user:` to `username:`

[38eac1c7e7](https://github.com/dcache/dcache/commit/38eac1c7e757a909b82ab342bd7959ca78e69d0f)
:   ftp: show file sizes for LIST output in bytes

[f427ba7044](https://github.com/dcache/dcache/commit/f427ba7044c0e562089ff62bc5b6f26636ad6e4f)
:   dcache-xroot: upgrade xrootd4j to 4.2.2

[b6c8502e3e](https://github.com/dcache/dcache/commit/b6c8502e3e8fdfe0f87387e11ee995458164fba9)
:   util/frontend: change transfer rate to double

[e7129fbcf3](https://github.com/dcache/dcache/commit/e7129fbcf381dcacbdaf40d3a8c9b12e593ea827)
:   bootstrap: don't hide bugs in 'create' command

[67825f2bcf](https://github.com/dcache/dcache/commit/67825f2bcf3328eaf95963c408a0b615e8298f75)
:   ftp: ensure cell is killed even if shutdown triggers a bug

[7a55a57b65](https://github.com/dcache/dcache/commit/7a55a57b658328a1bc79d70b4ad685ef73625382)
:   nfs-vfs: fix access check in ChimeraVfs (fixes 19fa7cf2425)

[9e65e4a96e](https://github.com/dcache/dcache/commit/9e65e4a96ec2700d600c5f97e5e8b0c4582b3b4b)
:   billing: fix NPE in billing from NFSv3 message

[be19093a68](https://github.com/dcache/dcache/commit/be19093a686441ce2f9b7220a9c320cd48917a50)
:   pool: improve error message on badly configured hsm instance

[57f35a9242](https://github.com/dcache/dcache/commit/57f35a924217d02793c7d574d88cc8a6192eb0d4)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.1

### acl

The group ACEs now  apply to desired group instead of to a users with the
same numeric id.

### gplazma

The `WLCG Common JWT Profiles` (v1.0) describes the `wlcg.groups` claim
for expressing group-membership. We are increasingly seeing this being
used as the OIDC equivalent to the group-membership expressed through
the VOMS extension.

During the auth phase of the login process, the group membership
information contained in a `wlcg.groups` claim from the OP is now
available as OpenIdGroupPrincipal principals. Subsequent plugins (e.g.,
multimap) may be used to convert these principals to more directly
useful principals.

### srm-server

The current release fixed a potential  NPE by not deleting tape objects and checking for as well as handling null values appropriately.

### webdav

dCache now responds with a 507 (Insufficient Storage) on GET request if
dCache must do a pool-to-pool internal-transfer or stage the file but no
pools have sufficient free capacity to support this.


### Changelog 7.2.0..7.2.1

<!-- git log 7.2.0..7.2.1 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[09aac3a496](https://github.com/dcache/dcache/commit/09aac3a496815b06d788e0003ac8060da8baadce)
:   [maven-release-plugin] prepare release 7.2.1

[672dbc04d2](https://github.com/dcache/dcache/commit/672dbc04d2e56a72c31a77a0bd63d53794c9e710)
:   all: reformat code using Google Style Sheet

[6a36cbf12c](https://github.com/dcache/dcache/commit/6a36cbf12cd5b511d30da16232ad2cb040d924ac)
:   acl: set IDENTIFIER_GROUP flag if WHO is GROUP or OWNER_GROUP

[a314c63346](https://github.com/dcache/dcache/commit/a314c63346ed501ffe31beb0f8cfd359fe6318d4)
:   Fix code format

[ee5dcef4e9](https://github.com/dcache/dcache/commit/ee5dcef4e90a9fd7a11b1d221dd2d998e1d7ed81)
:   webdav: return 507 if insufficient space on GET request

[30c76de0c7](https://github.com/dcache/dcache/commit/30c76de0c75ebd83584764cccaa11861d303bae0)
:   gplazma: scitoken make ExemptFromNamespaceChecks principal optional

[c60c9f0841](https://github.com/dcache/dcache/commit/c60c9f08413e0309b0b0358a5da98b6a51f45cb2)
:   gplazma/pnfsmanager: update namespace so scitoken 'scope' takes priority

[6cbecb1993](https://github.com/dcache/dcache/commit/6cbecb19931115c75992be75125ea62abf1e76ac)
:   srm-server: fix potential NPE in trs

[462dd9bdf4](https://github.com/dcache/dcache/commit/462dd9bdf48e672280b66991327d17b5927b54ac)
:   [maven-release-plugin] prepare for next development iteration

## Release 7.2.0

### Runtime

#### Java flight recorder

When debugging an issue on a running system often we need to collect jvm performance stats with 'Java flight recorder'.
Starting from release 7.2 the Java flight recorder attach listener is enabled by default. Site admins can collect and
provide developers with additional information when high CPU load or memory consuption is observed as:

```
jcmd <pid> JFR.start duration=60s filename=/tmp/dcache.jfr,
```

> Please note, that `jcmd` command is a part of `java-11-openjdk-devel` package (on RHEL and clones)

#### Handling of OutOfMemoryError

Depending which thread have received OutOfMemoryError the JVM might or
might not exit. In a later cache, dCache might remain in an
unpredictable state, where a component might be exposed as functional
when its not. 

With 7.2 we have update the java options to include ExitOnOutOfMemoryError, which
forces JVM to exit when an OOM is detected.

> NOTE: There are several situations when jvm generates an
OutOfMemoryError. The ExitOnOutOfMemoryError option works ONLY when
allocation in heap space fails.

### Admin

Updated mina-sshd library to version 2.7.0 with various security enhancements.

### Alarms

Documentation has been added specifying that the alarms service is not replicable.

### Billing

Documentation has been added specifying that billing is replicable only if it shares an underlying store (i.e., an RDBMS instance).

### Bulk

In preparation for future integration of tape recall optimization scheduling, some of the bulk processing has been adjusted to ensure the highest possible throughput to the scheduling endpoint.  These changes are largely invisible to the user.

### Cleaner

Previously, pools were cleaned synchronously one after another by the cleaner component. Doing so in parallel is expected to provide performance benefits.

The property `cleaner.limits.threads` now also controls the number of pools processed in parallel.

### Checksums

dCache now supports the stronger hash functions SHA-1, SHA-256 and SHA-512.

### Chimera (Shell)

It is now possible to add a label to a file.

The following admin commands for adding, removing and querying labels of a file object are available:

`labels get path` lists the labels of a file.

`label rm path labelname` removes the given label from a file.

`label add path labelname`  adds a new label to a file.

`ls_virtualdir labelname` lists all the files having the given label.

### Frontend

#### File labels support

If the file object has labels, these can now be queried, set and removed through a RESTful API.

To query labels, the `curl  -v   http://localhost:3880/api/v1/namespace/path/filename\?label=true` should be used.

To add a new label:

`curl   -X  POST  -H "Accept: application/json"  -H "Content-Type: application/json"  http://localhost:3880/api/v1/namespace/path/filename -d  '{"action" : "set-label",    "label" : "label" }'`

And to remove an existing label:

`curl   -X  POST  -H "Accept: application/json"  -H "Content-Type: application/json"  http://localhost:3880/api/v1/namespace/path/filename -d  '{"action" : "rm-label",    "label" : "label" }'`

#### Quota support

A RESTful API for the quota system (see further below) has been implemented; it allows for creating (POST), modifying (PATCH), listing (GET) and removing (DELETE) both user and group quotas.

All commands except GET require admin privileges.  For GET, anonymous users are blocked.  Otherwise, a full list of quotas can be obtained using:

`curl   -X  GET  -H "Accept: application/json" http://localhost:3880/api/v1/quota/user `

`curl   -X  GET  -H "Accept: application/json" http://localhost:3880/api/v1/quota/group `

The list can be limited to the quota for the user's uid or primary gid by appending the query '\?user=true', or, if known, a GET can be issued with the id as final path element:

`curl   -X  GET  -H "Accept: application/json" http://localhost:3880/api/v1/quota/user/4215 `

etc.

A full description of the API is available through the Swagger interface (https://localhost:3880/api/v1).

#### Bug fixes

In reporting movers (api/v1/pools/{pool}/movers), a problem with counts has been fixed so that both active and queued movers are included, and so that these are correctly broken down by their I/O activity (read/write).

In reporting pool usage (api/v1/pools/{pool}/usage), the csm (checksum) module object was missing profile information; this is now included.

### PNFS Manager

#### User and group quota
Release 7.2 introduces a user and group quota implementation. The quota system operates on the chimera namespace. It periodically counts space usage broken down by Retention Policy, UID and GID, and stores these counts in two chimera DB tables  t_user_quota and t_group_quota. Besides space counts these tables hold quota limits for each space count category by UID and by GID. A null for a limit means "no quota". No entries in these tables for a UID or GIDs means "no quota" for that UID or GID. CUSTODIAL Retention Policy corresponds to files going to tape, REPLICA corresponds to disk-only files, and OUTPUT currently is not used in dCache.  The quota system is controlled by the master switch:

```
        dcache.enable.quota
```

which by default is false. To enable the quota system, this variable has to be set to true on hosts running  the ```PnfsManager``` and ```NFS``` services.

Queries executed by periodic updates may run for a significant amount of time on the chimera back-end. Therefore default update frequency is once a day:

```
	pnfsmanager.quota.update.interval=1
	(one-of?MILLISECONDS|SECONDS|MINUTES|HOURS|DAYS)pnfsmanager.quota.update.interval.time.unit = DAYS
```

The default has been chosen to match an installation having close to 1B chimera file entries. On smaller installations it is advisable to increase the frequency by decreasing the above interval value.

This means that quota enforcement is eventual. If users run out of allocated quota they still will be able to write data over quota until the next update happens. Likewise, removing over quota data will not be noticed by the quota system until the next update.

Internally the quota check involves holding two maps `<uid, Quota>` (user quota map) and `<gid, Quota>` (group quota map) in memory at the level of `JdbcFs`. When create entry function is called the uid, gid and Retention Policy (based on RetentionPolicy tag of the parent directory or default retention policy if there is no tag) are used to check if maps have necessary entries and exception is thrown if space counts  exceed limits. Both maps are refreshed in memory from DB back-end every minute to pick possible new entries and new limits as well as to eventually catch the updated space usage counts.

From above follows that quota system is not going to work well with explicit space reservations (or space reservations expressed as WriteToken tag) on dCache installations having both disk-only and tape-backed pools. It requires RetentionPolicy tag. Although, since a general practice is to not to mix files with different retention policies under the same directories, this could work if RetentionPolicy tag is added to the containing directories.

On tape-only or disk-only installations, where Retention Policy of files is
unambiguous, the quota can rely on default, system-wide Retention policy value. On tape-only system, the default value supplied with dCache distribution is good:
```
    (one-of?CUSTODIAL|REPLICA|OUTPUT)dcache.default-retention-policy=CUSTODIAL
```
On disk-only systems, it needs to be set to :
```
    dcache.default-retention-policy=REPLICA
```

On a mixed system, a `dcache.default-retention-policy=CUSTODIAL` can be utilized for files bound to tape and RetentionPolicy tag can be set in the root of the directrory tree where disk-only files are stored.

An admin user can interact with the quota system via the ```PnfsManager``` admin interface. For this, the following commands are provided:

```
	set group quota [OPTIONS] <gid>  # Set group quota
	set user quota [OPTIONS] <uid>  # Set user quota

	remove group quota <gid>  # remove group quota
	remove user quota <uid>  # remove user quota

	show group quota [-gid=<string>] [-h]  # Print group quota
	show user quota [-h] [-uid=<string>]  # Print user quota

```

Use ```help <command>``` to learn how to use the command.

A user-facing quota interface is implemented through RESTFul frontend (see above).

#### File system statistics

Added functionality to cache total files and total space used on DB backend. Added two properties that control how often heavy queries that calculates the total number of files and total used space in the namespace us ru

```
    pnfsmanager.fs-stat-cache.time = 3600
    pnfsmanager.fs-stat-cache.time.unit = SECONDS
```

The resulting numbers are typically seen when running `df` command.

This patch has shown to speed up NFS availablity (among other things) after startup, especially on large installations.

### Pool

Before dCache version 7.2, the scrubber process was starting with the pool startup. As a result, as long as a pool inventory is not complete, the scrubber will fail with `Operation not allowed while repository is in state LOADING`. With this version, the scrubber now will start only after the inventory is complete.

### Security (common)

A general change to the internal SSL handlers to enable, where possible, a pass-through to native SSL on the node (usually OpenSSL) rather than using the Java implementation has been made.  This change affects xrootd, https (webdav) and gsi (GridFTP).  It should give improved performance (up to about 20%) when data is being encrypted.

### SRM Manager

Optimally recalling data from tape is achieved by reducing the number of tape mounts and on-tape seeks by recalling as much volume as possible per mount. To that end a dedicated scheduling strategy exclusively for `bring-online` requests is introduced into the `SrmManager`. It is capable of clustering requests by tape according to a set of configurable criteria before passing them on to the rest of the system. In its current state it requires two files with information on targeted tapes, their capacity and occupancy as well as the mapping of tape-resident files to tape name. The file formats are described in the book.

The scheduler can be activated by adding the following line to the srmmanager section of the properties file:

```
srmmanager.plugins.enable-bring-online-clustering = true
```

and configured as described in the book.

It is important to note that the scheduler can only be effective when a dCache instance contains exactly one SrmManager.

### WebUI (dCacheView)

The admin view now includes a separate page for plots of file lifetimes by pool group.  All file lifetime plots have been simplified to a single data series (average lifetime).  The viewport on the pool plots page has also been adjusted for easier scrolling on smaller (laptop) screens.  The "print" button on the magnified plots dialog has been removed because it is not supported in all browsers.

For the new quota system, a quota view consisting of a read-only table has been added to the admin view.  A similar table (limited to the user's quotas) also appears in the UserProfile view.

### XRootD

Several important fixes have gone in since 7.1.

First, the parsing of the 'triedrc' CGI was incomplete; it now properly accounts for error code/message pairings.

Second, a race condition which was causing certain clients to report that a file is not found when requesting the checksum for an upload (persist on successful close) transfer was previously fixed in the door.  This fix has now been migrated to the pool (where it really belongs) and made more robust.

Finally, the third-party-copy client has been changed to conform with the behavior of the SLAC vanilla client so that it requests the exact number of remaining bytes on the final read chunk.  This should eliminate an issue previously encountered with a particular CEPH plugin.  The default chunk size has also been increased to 8 MiB to match the SLAC client.

### Changelog from 7.1.0 to 7.2.0

<!-- git log 7.1..7.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[12d1e46](https://github.com/dCache/dcache/commit/12d1e4662603880e69d9a7001744cf8e7d33fa63)
:   [maven-release-plugin] prepare branch 7.2

[ff88aac](https://github.com/dCache/dcache/commit/ff88aace014dd0720a854087c782ae1492c1cb93)
:   nfs: fix typo pricipal -> principal

[adec8b1](https://github.com/dCache/dcache/commit/adec8b122b7eca1f1a8e4172caac87facc94bc9d)
:   libs: use zookeeper 3.5.9

[e3990d6](https://github.com/dCache/dcache/commit/e3990d64dd314b33d504c9462bb22f15a872caf3)
:   srm-server: make trs admin commands use rwlock

[3438812](https://github.com/dCache/dcache/commit/343881257ec56804adad2228da3a4ed86021c593)
:   frontend: add service to provide Storage resource reporting

[49d8ba6](https://github.com/dCache/dcache/commit/49d8ba6c9e0c2f1bb665717286b8054bd52300dd)
:   dcache: Modernize PoolStatisticsV0

[7effd50](https://github.com/dCache/dcache/commit/7effd509eb93272d9fe02ca0b03efb54928f611e)
:   webdav: update representation of symbolic links in HTML page

[5e77f79](https://github.com/dCache/dcache/commit/5e77f79168b834961cb4acd302464ea9e39cca20)
:   book: described trs admin commands

[9071fa1](https://github.com/dCache/dcache/commit/9071fa1af6f2ded438effebd5d1d87750f13e387)
:   srm-server: add trs configuration admin commands

[97c54ae](https://github.com/dCache/dcache/commit/97c54aec8ee19a13a1c65cf5cd8abce76dc1f761)
:   dcache: remove redundant file

[c756308](https://github.com/dCache/dcache/commit/c756308cf168ec85a13d95de72250283afc936d1)
:   src: don't use com.google.common.io.ByteStreams

[4b6338f](https://github.com/dCache/dcache/commit/4b6338fce6f8d7089914c5223a063b9e3a9e835d)
:   pool: remove dead code in org.dcache.pool.p2p.Companion

[2fc1f8d](https://github.com/dCache/dcache/commit/2fc1f8db21f22a24bfbf16ccbc6621d9d15d9bea)
:   restful: provide functionality to remove or add labels of a file

[84b45e6](https://github.com/dCache/dcache/commit/84b45e6f119145b33003f45f6308177b7a5d2327)
:   namespace-chimera: ignore file size update on file flush

[1a5b28d](https://github.com/dCache/dcache/commit/1a5b28d9905d1b9c98cd948e34d6828546a27e12)
:   book: added clarification to trs description

[9602167](https://github.com/dCache/dcache/commit/9602167f2ec4d5822f874e4e35d92d06f5fa8552)
:   pool: scrubber should ignore the files if checksum is missing

[862093f](https://github.com/dCache/dcache/commit/862093fa3b8f8eb4080d398cf11b05c146348ea3)
:   billing: reduce unhelpful log spamming

[278f712](https://github.com/dCache/dcache/commit/278f712ff7a8951fc28e40ae4cf2aea95da958ac)
:   pool: add Repository#waitForLoad method

[05ee28c](https://github.com/dCache/dcache/commit/05ee28ce8425e1d9c0af188d94c6487838afa463)
:   webdav: add 'http-tpc ls' admin command

[bf7610a](https://github.com/dCache/dcache/commit/bf7610a6ff2089a63acb4b7892b39aace03fc375)
:   book: describe srm tape recall scheduler and file formats

[e975365](https://github.com/dCache/dcache/commit/e9753656dbb5bcad8b82f72a9755cd3fb8c5f780)
:   build(deps): bump jetty-webapp from 9.4.41.v20210516 to 9.4.43.v20210629

[a24b2c8](https://github.com/dCache/dcache/commit/a24b2c8ba73b194fc4e632b6883359d4e2fcf13e)
:   dcache-xroot: bump dependency to next xrootd4j release

[cd8bf7b](https://github.com/dCache/dcache/commit/cd8bf7b429472e5e20ddda62d89fbdc53c14c767)
:   src: unify all instances of logger to a same style

[fae6d73](https://github.com/dCache/dcache/commit/fae6d73ba894d8fb1c8ed998a2732720aa70a087)
:   srm-server: add tape info provider SPI and JSON support

[61decad](https://github.com/dCache/dcache/commit/61decad4189f745ae1c3a53bd10c315c3fe3455c)
:   libs: use sshd-core 2.7.0

[33dcbda](https://github.com/dCache/dcache/commit/33dcbda977f97b4907241b8a963522aaf91341da)
:   src: unify all instances of logger to a same style

[c4f755b](https://github.com/dCache/dcache/commit/c4f755baf1d2a6abae19305887418c12d01aba6d)
:   ssh: remote unnecessary String#valueOf call in logging

[4a1ffa1](https://github.com/dCache/dcache/commit/4a1ffa1ddc0a9d7a86ae4824e7932d7092672e7e)
:   webdav: fix regression from commit a2b252c07f

[6f69d12](https://github.com/dCache/dcache/commit/6f69d121217ac8c6980c16ba52de273c2221774f)
:   testing: consolidate builder classes

[184c826](https://github.com/dCache/dcache/commit/184c826e4062fe562deea213c6341051a9c6d113)
:   srmmanager: fix race condition in LoginBrokerSubscriber

[53c4ba1](https://github.com/dCache/dcache/commit/53c4ba166199dafd27f61f3c24cc76b17181c3cc)
:   dcache-frontend: add RESTFUL quota resource

[9212aa4](https://github.com/dCache/dcache/commit/9212aa48c88620412f9669064c0f66b79f244f1a)
:   Revert "libs: use sshd-core 2.7.0"

[f27c206](https://github.com/dCache/dcache/commit/f27c2067ec88fbdabe1bf466052794f8d76fe58f)
:   libs: use sshd-core 2.7.0

[5b07905](https://github.com/dCache/dcache/commit/5b0790501f9a4ab5c8459489a1e9e8195b5dd972)
:   pool/pnfsmanager: don't accept a non-Enstore flush without locations

[5e6d306](https://github.com/dCache/dcache/commit/5e6d3062d792c522eb65121d89f2b75f2e4e8d7a)
:   pool: update Kafka tape events to include additional information

[7daf803](https://github.com/dCache/dcache/commit/7daf80372aca4eae6d01d2a7b00c6aeb118fb0fe)
:   github: add citation file

[eb588fd](https://github.com/dCache/dcache/commit/eb588fd3c2fc4f45820e7d1b94f538146530143c)
:   dcache-core: add quota messaging and support in PnfsManager

[6e9fefe](https://github.com/dCache/dcache/commit/6e9fefe5ec8e6ad98872ee9bb03cf0d73ec1239b)
:   namespace: add delete quota to driver and PnfsManager admin commands

[f338304](https://github.com/dCache/dcache/commit/f3383040bb2785a8c40290fcee92b0eedea0b6c5)
:   common: support requirements on parsed value in ByteSizeParser

[6c34d24](https://github.com/dCache/dcache/commit/6c34d246cafed05b83465a30475f0222e32a2e64)
:   common: Update ByteSizeParser to support multiple representations

[5bf281a](https://github.com/dCache/dcache/commit/5bf281a125f8b189b3b6494a2d81171bcc5cb18d)
:   common: update ByteSizeParser to follow builder pattern

[6809690](https://github.com/dCache/dcache/commit/68096908b5f508ed4fdeb9229d183a90211e2f9c)
:   pnfsmanager: fix regression introduced with commit 61a4e8dc4e

[c53315f](https://github.com/dCache/dcache/commit/c53315faecdfc9e0d0c6a6f38b224c145994b1dd)
:   common: provide more diagnostic information

[a1f1aff](https://github.com/dCache/dcache/commit/a1f1aff3b8195a5ddb890d86f0970e3787923cb1)
:   pool: improve flush information

[bacafac](https://github.com/dCache/dcache/commit/bacaface743f8d645c1f956cd1a1143f79636542)
:   Motivation:

[302db70](https://github.com/dCache/dcache/commit/302db70188c6b13a369ac690ed61eac462204be1)
:   Revert "dcache-xroot: prevent attempt to write to channel for which checksum has been computed"

[489af68](https://github.com/dCache/dcache/commit/489af68fbc21d2eef6050c77bd161be433af6f47)
:   srm: add srm bring-online request scheduler

[3b89d2e](https://github.com/dCache/dcache/commit/3b89d2e6966ee5847e399f1b8c37f36265128d27)
:   dcache-xroot: prevent attempt to write to channel for which checksum has been computed

[0a1d34d](https://github.com/dCache/dcache/commit/0a1d34dba1a2325802a04bcd5d33776913f5291e)
:   restfulapi:  add restful Api call  to query the lable of a givin file object

[e54e3c4](https://github.com/dCache/dcache/commit/e54e3c493704540888833cb2780f1f543c0e4b80)
:   skel, pool.xml: fix regressions from 13117-13118

[4697c7a](https://github.com/dCache/dcache/commit/4697c7a978de92ce97e10a7a5dd170acdf7d3e56)
:   dcache-xroot: increase server-side frame size to 8 MiB

[8567435](https://github.com/dCache/dcache/commit/85674350990a49ec728391a3c89fc53ee3672f9f)
:   dcache-xroot: increase tpc client block/chunk size to 8 MiB

[d0bae1f](https://github.com/dCache/dcache/commit/d0bae1f294ed756c907f81a6b078863b562f72e1)
:   Revert "libs: use sshd-core 2.7.0"

[81e676d](https://github.com/dCache/dcache/commit/81e676d65814c858fb3f8fc89887bb7d10e41206)
:   libs: use sshd-core 2.7.0

[d84c908](https://github.com/dCache/dcache/commit/d84c9082e9095fbab758ca1c392f730d197e0318)
:   PnfsManager: improve wording of quota command

[13215ee](https://github.com/dCache/dcache/commit/13215eead7910ca2911f2e368fbb98c5717a034c)
:   rpm: add  dcache-convert-authzdb-to-omnisession into list of packaged files

[ae11f68](https://github.com/dCache/dcache/commit/ae11f686ec3baa39083ff4a7ecdd844cb239baf9)
:   skel: add explicit replicable property even when value is false

[03ca593](https://github.com/dCache/dcache/commit/03ca5936f180b84b420cf6383b2a625803e1bfcc)
:   alarms, billing: specify shared rdbms in the case of replicated service

[061ce56](https://github.com/dCache/dcache/commit/061ce569f667131aa0a84214ce40392c4516cc3e)
:   build(deps): bump commons-compress from 1.19 to 1.21

[a733b3f](https://github.com/dCache/dcache/commit/a733b3fbe605c6b2fedf85dfeb6af0d55a242183)
:   gplazma: add util to convert authzdb file to omnisession

[e160a3c](https://github.com/dCache/dcache/commit/e160a3c8f69144dda1d6aeb725e43f307ad1a25f)
:   gplazma: add omnisession plugin

[f33acca](https://github.com/dCache/dcache/commit/f33accaa9d746ed4940bd9b276774c9ae6ea5759)
:   srm: log transfer protocols in access log

[7f1f63a](https://github.com/dCache/dcache/commit/7f1f63a7a24bf3eadf731164727daebc301e9e59)
:   gplazma: multimap now supports OP in 'oidc' predicate

[33868f5](https://github.com/dCache/dcache/commit/33868f57335df7029edd97eff876140a5fcf7403)
:   dcache-frontend: remove unreachable catch clause

[69f9ece](https://github.com/dCache/dcache/commit/69f9ece1b7fcd879bcd13a5b8984cea06271185f)
:   dcache: use charset constant instead of String-based dynamic discovery

[a6a096d](https://github.com/dCache/dcache/commit/a6a096d74f2cacfedb2c717db237565a850fbbe7)
:   core: fix NPE in TryCatchTemplate

[0c19f64](https://github.com/dCache/dcache/commit/0c19f644a86a3d11de5049002135753afe64b7f6)
:   dcache-core: add checksums sha-1, sha-256 and sha-512

[37ae4b8](https://github.com/dCache/dcache/commit/37ae4b8d7970fdf4e365ab3b38b6311673b703ff)
:   dcache-core: correct reported units of transfer size and speed

[2cf3ce5](https://github.com/dCache/dcache/commit/2cf3ce5245b24cb4e1843a40ca77a412caa420c2)
:   nearline: add simulated stage delay options to FileSystemNearlineStorage

[a95a832](https://github.com/dCache/dcache/commit/a95a8328c7fbe8f5038a78d036587225aff3ef90)
:   dcache-bulk: make SignalAware reusable

[8218698](https://github.com/dCache/dcache/commit/8218698ea08d98e8d189fa62ab08f5442cb53ca0)
:   starting with a few macaroon hands-on examples

[56154bc](https://github.com/dCache/dcache/commit/56154bc722e96b8c287ef6a7aa2c8a2938dad382)
:   qos-engine: use batching to notify concerning completed actions

[554f4e2](https://github.com/dCache/dcache/commit/554f4e28d64b34e99245222e4842ec4747cefebb)
:   dcache-xroot: move upload commit for persist-on-successful-close to the pool

[61a4e8d](https://github.com/dCache/dcache/commit/61a4e8dc4e4877316f3779dfc1a04acd40419067)
:   Implementation of UID/GID quota system in dCache

[695b7c8](https://github.com/dCache/dcache/commit/695b7c886029859b44feace8056a0dec3ab8fc46)
:   skel: remove obsolete python scripts

[0067f72](https://github.com/dCache/dcache/commit/0067f72e8f3c481b3f97f5705779d56e23af1cbf)
:   pool: simplify inotify support in pool.

[9a2c99a](https://github.com/dCache/dcache/commit/9a2c99a54aa8b9b03e8fe79890642fa88bef1927)
:   gplazma: oidc check token validity if JWT

[0ed6b58](https://github.com/dCache/dcache/commit/0ed6b58a7a6c089d266c9fd2fa6e59f2da958910)
:   chimerashell: add recursive option to 'chown' command

[17e7c30](https://github.com/dCache/dcache/commit/17e7c30b26f56bc537ac3a97c6ab39331f226db3)
:   Added a link to the user guide to the main README

[4d5f054](https://github.com/dCache/dcache/commit/4d5f054b37c1efce9d7521335e24aa1270eef345)
:   SRM : Fix IPV6 logging for SRM

[75b395b](https://github.com/dCache/dcache/commit/75b395b3ba0fba2ec752c43d14de7823b3d143bc)
:   dcache-chimera: introducing parallel pool cleaning

[ab900b8](https://github.com/dCache/dcache/commit/ab900b870bfb18bae4b8a9dc5273f7758df59f42)
:   dcache-qos: cast non-Object arrays to varargs Object[]

[a5f691f](https://github.com/dCache/dcache/commit/a5f691fdc3fd9cf099d90fffaf5161937ae9fa5c)
:   qos-adjuster: add waiting queue and state; polling

[e5bbab7](https://github.com/dCache/dcache/commit/e5bbab767fa77839b86447a4c9ae37a1fb666f83)
:   dcache-chimera:add admin commands to support add/remove file lables

[dc4e6db](https://github.com/dCache/dcache/commit/dc4e6db1b5bf014e9ccbf4d9cbeb1bdcf4fb6a35)
:   frontend: fix wrong success on not defined  action

[ac3a3e4](https://github.com/dCache/dcache/commit/ac3a3e48fc39c14b953e1fed171976528da6f143)
:   pool: http-tpc add support for multiple trust stores

[ab72c86](https://github.com/dCache/dcache/commit/ab72c86d51010d6aaeccbd54299eb45fd60a80cb)
:   pool: update configuration to split http-tpc and remote-gsiftp CA settings

[4154dc1](https://github.com/dCache/dcache/commit/4154dc159359a03525f6955e18f542131a89bd11)
:   build(deps): bump jetty-servlets

[ae40d43](https://github.com/dCache/dcache/commit/ae40d436c787a20840cb96de4ee5517ea117a131)
:   checksum-module: add missing map to JSON info

[e22b598](https://github.com/dCache/dcache/commit/e22b598e82f918a6e0c09ea335159b35c98c090c)
:   pool: update ReplicaDescriptor to implement AutoCloseable

[b7d7ee0](https://github.com/dCache/dcache/commit/b7d7ee0c937cd1567e922d0131fcaf9abc6682b5)
:   pool: checksum scanner: don't create EnumSet of OpenOption in a loop

[d9ac931](https://github.com/dCache/dcache/commit/d9ac931609549828f7a00085cc7dbdb2cfe0cbdc)
:   chimera:adding labels metadata  to file objects

[5393593](https://github.com/dCache/dcache/commit/53935931e22d69268ea95dd5cc589960bfd0d8a7)
:   dcache-qos (10.6): qos scanner admin interface, local client and remote receiver

[3e29dd3](https://github.com/dCache/dcache/commit/3e29dd3043b0e90d4d69fa6f61d0074092684a6e)
:   bulk: change PIN, UNPIN and UPDATE-QOS to breadth-first

[0c555c8](https://github.com/dCache/dcache/commit/0c555c869854ab073af0f78356ab2e0b1b8b75eb)
:   build(deps): bump httpclient from 4.5.3 to 4.5.13

[a705b0a](https://github.com/dCache/dcache/commit/a705b0aab51e5e553b502aef885eb8df2adf6212)
:   ssh: update DirectCommand to use SshOutputStream

[ddd6c88](https://github.com/dCache/dcache/commit/ddd6c88ccd24ace11ec4c834466ef71328a9f941)
:   common-security, doors: switch to openssl where possible

[f64a880](https://github.com/dCache/dcache/commit/f64a88005f9f5bb677e71002286c74fdadc4c0b2)
:   FsSqlDriver: use more conservative SQL query as default, so that system tests passs. Move more advanced SQL query to psql specific driver.

[a96ca9e](https://github.com/dCache/dcache/commit/a96ca9e003dc63e8f9ff974694a42abdbfcbebe7)
:   User guide: bulk-request URLs contain /api/v1

[1848354](https://github.com/dCache/dcache/commit/18483549e88fe44d3ad7d7dab16c97424dbf7add)
:   srm: remove redundant Pgpass class

[8b0bcba](https://github.com/dCache/dcache/commit/8b0bcba923b9f7598e0ece26582a9f6f6645caf1)
:   ssh: drop custom AuthorizedKeyParser

[cb7282c](https://github.com/dCache/dcache/commit/cb7282cefedbd748ae1e0573c39bf1fdffd62d62)
:   dcache-qos (10.4/5): qos scanner handlers

[f76991c](https://github.com/dCache/dcache/commit/f76991c49821cc2cd5409931a2bae624ec0245ff)
:   dcache-xrootd: upgrade xrootd4j to 4.1.1

[a63e603](https://github.com/dCache/dcache/commit/a63e6030a0e098d92b51d93ed1fdfc07fca2ac9c)
:   Namespace: add FS stat cache table

[b19bb24](https://github.com/dCache/dcache/commit/b19bb247a2224e09d2c1bc30f866a351b41fcc43)
:   Fix typo

[2133f6e](https://github.com/dCache/dcache/commit/2133f6ea0d698ba7f493ea257b011666a7b0c20a)
:   dcache-xroot: parsing of 'triedrc' CGI lacks separation by optional comma

[77eadb3](https://github.com/dCache/dcache/commit/77eadb32ae9a38f82680c864435c9d7a0f93c1d6)
:   nfs: add possibility to configure BerkeleyDB client store

[2c09996](https://github.com/dCache/dcache/commit/2c09996ebb43fb9ff835a08ad453795fa02e7009)
:   poolmanager: fix _waitingFor access outside of synchronized block

[6fa08f5](https://github.com/dCache/dcache/commit/6fa08f5eb17d141091d0ae2a3ec75747cfeb153a)
:   ftp: add support for the SITE SYMLINK command

[bf463de](https://github.com/dCache/dcache/commit/bf463de8a450ad094f4cab04a144ffb0ab26f14b)
:   pool: http allow client to send credentials when TLS is used

[0a22bac](https://github.com/dCache/dcache/commit/0a22bac97f677a253148c36d1efb051dcacbeb2a)
:   gplamza: oidc support fetching username and groups direct from OP

[275df29](https://github.com/dCache/dcache/commit/275df29bd48d5e75ff389ceea6f8693c0035c879)
:   build: disable stack-trace trimming in surefire

[e780ace](https://github.com/dCache/dcache/commit/e780ace57d9a5b2d770014ab721803306d98619e)
:   build(deps): bump jetty-io from 9.4.35.v20201120 to 9.4.40.v20210413

[206185d](https://github.com/dCache/dcache/commit/206185d9eade066b2761c281b9ea6958f9108683)
:   frontend: bump swagger version to 1.6.2

[838d422](https://github.com/dCache/dcache/commit/838d42213e40383d9907e754a1069f1e030235ad)
:   runtime: force JVM exit on OutOfMemoryError

[c2bc2ae](https://github.com/dCache/dcache/commit/c2bc2ae28d53131d6c04e2852e54c606d2b557fa)
:   runtime: enable Java flight recorder attach listener

[939673d](https://github.com/dCache/dcache/commit/939673d8dc9db3688ab8b78c19effb12aeee552f)
:   dcache-qos (10.3): pool operation map and counters

[84d65bc](https://github.com/dCache/dcache/commit/84d65bca9ebdffbb4d3380152d981f860335032c)
:   dcache (request container): extract reusable deliverables and endpoint from unit test suite

[6c7b4da](https://github.com/dCache/dcache/commit/6c7b4daac141ce3cbe8963ca4da8ed7e7990a301)
:   nearline: don't use guava to sort the output of various 'ls' commands

[9f69e5c](https://github.com/dCache/dcache/commit/9f69e5c4467f36e69ec8a8e9514f0c691a82f5a8)
:   dcache-chimera: use RemotePoolMonitor to discover file locality

[a31b429](https://github.com/dCache/dcache/commit/a31b42913364cff3617693d9ced8981248ac74f9)
:   poolmanager: remove redundant test in WatchdogThread

[959cac7](https://github.com/dCache/dcache/commit/959cac7483d785cf91be1537e760aba8e01ae3cd)
:   ftp:clean dead code

[6d7b6a4](https://github.com/dCache/dcache/commit/6d7b6a41c58063b774f3e4ae09fef16b3326d2fc)
:   book: add cleaner chapter

[4a1b405](https://github.com/dCache/dcache/commit/4a1b405c4be227652f63166130c76c081f8446f6)
:   webdav: use Jetty's built-in support for CORS

[f26be37](https://github.com/dCache/dcache/commit/f26be3769f5c677967945aedff9b368166eed3b8)
:   pool: build list metadata entries only when we are going to use it

[99b4d18](https://github.com/dCache/dcache/commit/99b4d18cba3b6336566de0107f20db3de51d072f)
:   pool: use Set#of to construct O_READ and O_RW constants

[e78b504](https://github.com/dCache/dcache/commit/e78b504defd7db0349fe6b5c28e78391e818d588)
:   pool: remove invalid test case of configured space

[b4f957b](https://github.com/dCache/dcache/commit/b4f957b4b946d8a1227c4c45d8a839898416dad8)
:   pool: fix pool size reporting when static/runtime config is not defined.

[f40adce](https://github.com/dCache/dcache/commit/f40adce841c2378e239702f7b0137aa10c992b80)
:   poolV4: fix reader/writer counts

[14a5fc5](https://github.com/dCache/dcache/commit/14a5fc52b701f297c2389d7abe7422d2742f03e0)
:   [maven-release-plugin] prepare for next development iteration





</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
