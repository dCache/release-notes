HTML header: <title>dCache 11.2 Release Notes</title>
             <!--#include virtual="/template/default-head.shtml" -->
             <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
             <!-- Bootstrap -->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
                   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
                   integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
             <!--link type="text/css" rel="stylesheet" href="jquery.tocify.css" /-->
             <style type="text/css">
             h5 {
                 font-size: 15px;
                 font-style: italic;
                 margin-top: 20px;
             }
             body {
                 padding-top: 20px;
             }
             @media (max-width: 767px) {
                 #toc {
                     position: relative;
                     width: 100%;
                     margin: 0px 0px 20px 0px;
                 }
             }
             @media print {
                 #toc {
                     display: none;
                 }
             }
             </style>

<div class="container">
<div id="banner">
   <div id="bird_large">
      <img src="/images/dcache-banner.png" class="bird"></img>
   </div>
   <div id="sidebar-b">
      <span class="dcache-nav-bar">
      <a href="/index.shtml">home</a>
      |
      <a href="/news.shtml">news</a>
      |
      <a href="/manuals/index.shtml">documentation</a>
      |
      <a href="/downloads/IAgree.shtml">downloads</a>
      |
      <a href="/feedback.shtml">feedback</a>
      |
      <a href="/manuals/googlesearch.shtml">search</a>
      |
      <a href="/imprint.shtml">imprint&#160;</a>
      </span>
   </div>
</div>
<div id="content">

<div class="row">

<div class="page-header">
<h1>What's new in dCache 11.2<br/>
<small>Release notes</small></h1>
</div>

## Highlights

- NFS read performance improvement
- Kafka logging for billing
- Introduce hot file replication mechanism on pools, where the pool itself tiggers replication of hot (popular) files

## Incompatibilities

- Xrootd PrepareRequest will return `Unsupported`.

## Release 11.2.0

### Billing

The transferTag is used by clients to label transfers with activity-specific information, such as experiment ID and workflow ID. This information is currently provided by XRootD and HTTP clients, and can be used by monitoring systems to identify data flows. Starting version 11.2.0 dCache includes transferTag information into the generated JSON records.

A Kafka producer operates asynchronously by default: when an application calls send(), the record is placed into an internal buffer and the call typically returns immediately, without waiting for broker acknowledgements.

However, asynchronous operation does not guarantee fully non-blocking behavior. Under certain conditions—such as broker unavailability, missing topic metadata, or exhausted producer buffers—the producer may block or fail synchronously. These edge cases are a common source of confusion and can lead to unexpected application failures.

In dCache, this behavior poses a risk when Kafka is unavailable, as transfer events may not be marked as successful if Kafka reporting fails, potentially causing service instability or crashes. To mitigate this risk, Kafka logging has been relocated to the non-blocking Billing service and disabled in other dCache components that may block on Kafka availability. As a result, Kafka cluster outages no longer impact the stability of dCache processes.

To enable kafka for billing service the folowwing property in `billing.properties` should be enabled 
`(one-of?true|false|${dcache.billing.enable.kafka})billing.enable.kafka`.


### NFS

The NFS door has been updated to use the original NFS request credentials when Proxy-IO is used.

### Pool

The NFS mover has been updated to use `zero-copy` to reduce memory copies when data is sent to a client during READ.
This provides up to a 20% increase in data throughput for data-intensive applications.


Introduce hot file replication mechanism on pools, where the pool itself tiggers replication of 
hot (popular) files. When the number of in-flight transfers for a file reaches certain configurable
threshold, the pool invokes the migration module to create a pre-defined configurable number of
replicas on other pools in the same pool group.
Added `hot file` replication feature to automatically detect and replicate heavily-requested files
to other available pools in the same group.
Added `hotfile` commands to the pool admin interface to enable customization of parameters affecting
hot file replication.
New boolean configuration file property `pool.hotfile.monitoring.enable` (set true to enable hot
file replication).


### Xrootd

Up to version 11.2.0 on Xrootd request `prepare`, which is supposed to trigger staging, dCache will
respond with OK without performing any actions. Thus, any access to a file on tape will trigger
a stage and potentially block. This behavior is now changed, so that the `prepare` request will fail with
the error `Unsupported`. Users who need staging should use the TAPE-REST-API.


### Changelog from 11.1.0 to 11.2.0

<!-- git log 11.1..11.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->


[f6e47327ab](https://github.com/dcache/dcache/commit/f6e47327aba0957371788016ede1b857fc64c4d8)
:   [maven-release-plugin] prepare branch @{releaseLabel}

[b21c65af3e](https://github.com/dcache/dcache/commit/b21c65af3e0819106829114eacbcfd310850e84b)
:   bulk: catch another place generating verbose logging

[a9f5e776f1](https://github.com/dcache/dcache/commit/a9f5e776f1ade020065410ee68dbdb2409e518a3)
:   pool: implememt hot file replication

[924ef9354d](https://github.com/dcache/dcache/commit/924ef9354d8e7ec6d1cf76345103644b3edfa242)
:   code coverage: bump JaCoCo version to 0.8.14

[9a010bf35a](https://github.com/dcache/dcache/commit/9a010bf35aebf3e72c1f4814f7f2eea04700d06e)
:   Update JsonWebToken unit tests for ECDSA signatures

[47bcf81c03](https://github.com/dcache/dcache/commit/47bcf81c038971952fa8472dc9060e10f1f1dc84)
:   packages: fix gplazma2-python plugin version

[10396b94c0](https://github.com/dcache/dcache/commit/10396b94c0dd968072dacabfe3ecfb688ec573d2)
:   ci: enable kafka in billing

[ad03a7caaf](https://github.com/dcache/dcache/commit/ad03a7caaf31e85a55bc3b9703ea8d97920cccbc)
:   Revert "fix broken test due to kafka move to billing"; fix the failing test

[7e028b08d9](https://github.com/dcache/dcache/commit/7e028b08d9895323f9dbe9da5842c7addb8dc7d4)
:   libs: update maven-compiler-plugin version to 3.10.1

[fd98eb1850](https://github.com/dcache/dcache/commit/fd98eb1850ece7052d4cc7f9068d2b4809ecc8fa)
:   fix broken test due to kafka move to billing

[4be74060f8](https://github.com/dcache/dcache/commit/4be74060f8e608a3eba61bc493302e82a2281b91)
:   billing: migrate Kafka logging to Billing service

[01ace93a31](https://github.com/dcache/dcache/commit/01ace93a31351a6afc122ee50a0947bd3c6d387c)
:   frontend: validate JSON in migration request

[766f7b36bd](https://github.com/dcache/dcache/commit/766f7b36bd49e4307936c7250e8877668027afa7)
:   pom: bump jackson to 2.18.5

[31eff98dfb](https://github.com/dcache/dcache/commit/31eff98dfb6b54ecfc58273c83046caf8da07e0c)
:   pom: bump netty version to 4.2.9

[e8d25383b7](https://github.com/dcache/dcache/commit/e8d25383b701214b8e847a52400fcd22fd406ccf)
:   ci: escape strings in frontend test environment

[466b32883f](https://github.com/dcache/dcache/commit/466b32883f1614baf57771575f6f70ba1338d2d2)
:   bulk: avoid spamming log file when requests have already been cleared due to auto-clear flag

[7a5b413ef4](https://github.com/dcache/dcache/commit/7a5b413ef460ac442194847a1707c61bff30c521)
:   nfs: update `show pools` command to display pure IPs

[f77a00aea8](https://github.com/dcache/dcache/commit/f77a00aea8877ef00c76c6bfb3cfd718d572741c)
:   Minor AI-suggested improvements to Maven config

[fb5f925357](https://github.com/dcache/dcache/commit/fb5f925357d304b239952a65590c7a4dbb0242d6)
:   Revert "Minor AI-suggested improvements to Maven config"

[07532e159e](https://github.com/dcache/dcache/commit/07532e159e1bf9dadae00befb6d03739bb1ac16b)
:   Minor AI-suggested improvements to Maven config

[6256b08b95](https://github.com/dcache/dcache/commit/6256b08b9553d3c76669406fb8c6f07b9d87fc44)
:   Prevent unwanted spinning on migration jobs

[3d91759804](https://github.com/dcache/dcache/commit/3d917598040401dbfd66bdff7dbd9c10ea664a5f)
:   billing: add transfer tag to moverInfo json

[297a7ba0b6](https://github.com/dcache/dcache/commit/297a7ba0b642716b1219fe67291240c8b9185890)
:   gplazma: update explain login to allow credentials

[a9871213ba](https://github.com/dcache/dcache/commit/a9871213ba461fa54f7d978c876cc153ce516d03)
:   common: increase robustness of access log file

[9f0a67d72e](https://github.com/dcache/dcache/commit/9f0a67d72ea7efedc343045efbad9b9ffcb9d327)
:   build(deps): bump io.netty:netty-codec-http

[e800889414](https://github.com/dcache/dcache/commit/e800889414bfcf90fe1826b2e691f0cde6b4bb9a)
:   docs: replace dCache components diagram

[c7cbf8eede](https://github.com/dcache/dcache/commit/c7cbf8eede79d27788d13d6cc920c89a79869e0b)
:   webdav: fix range header formatting in relay request

[4ba5e32039](https://github.com/dcache/dcache/commit/4ba5e32039519a1bbee2f600d104b20452a9eeba)
:   pool: use zero-copy FileChunk to perform NFS reads

[4191e1c0cc](https://github.com/dcache/dcache/commit/4191e1c0cc3388cba8a42c199c3af81028102829)
:   libs: update swagger-jersey2 version to 1.6.14

[99ada5032a](https://github.com/dcache/dcache/commit/99ada5032a3bdddb14d6e8be84193bc1ba4a04bd)
:   libs: update swagger version to 5.30.2

[a0c481b062](https://github.com/dcache/dcache/commit/a0c481b0624f343390a92fcfc2c22d9c063846ea)
:   frontend: Fix issue 7968

[1719c0b59e](https://github.com/dcache/dcache/commit/1719c0b59e2c4746e54989ab75f60a097abea991)
:   Address PR #7785 review comments: fix DER encoding for ECDSA signatures and add unit tests

[fe7be7478c](https://github.com/dcache/dcache/commit/fe7be7478c1b132616eaacd060c5def40dd010ef)
:   ci: add dcache db migration test

[14a743ef4f](https://github.com/dcache/dcache/commit/14a743ef4f565408785675d8bd481077b9d26faf)
:   srm,spacemanager: fix liquibase migration checksum mismatch

[873ce0cc68](https://github.com/dcache/dcache/commit/873ce0cc68dfb0a23d7c10d72b02904910a11d57)
:   fix the propert va;ue for frontend limits error max-allowed

[8de5c6f185](https://github.com/dcache/dcache/commit/8de5c6f185e7cce71f05c3f83fe8b6814b54890d)
:   common-security: add workaround bouncycastle EC algorithm name mismatch

[ec0c009b32](https://github.com/dcache/dcache/commit/ec0c009b3287de68aebcd22cb1d52fbc56ee5295)
:   frontend: add code flow auth to dcache-view

[912691890e](https://github.com/dcache/dcache/commit/912691890e21fce7de96f41d4fdd755df6dbece8)
:   gplazma: fix banfile plugin

[426a95039d](https://github.com/dcache/dcache/commit/426a95039d778fa82b3f344d8395a83597299c27)
:   webdav: return 403 on unauthorized attempt to rename resource

[c483a3ce65](https://github.com/dcache/dcache/commit/c483a3ce65bddb5d48eeb3376467ef16e0a3f297)
:   pool: use SSLTrustManagerWithHostnameChecking to initialize CAnL

[430b1cec17](https://github.com/dcache/dcache/commit/430b1cec17c2eb7f9e22f37b0b4cbcfc66655571)
:   ci: stop using voms server

[defc79cd40](https://github.com/dcache/dcache/commit/defc79cd40e9253de62437c910da8fb5cb515ac7)
:   libs: update jersey version to 2.47

[76fbde2575](https://github.com/dcache/dcache/commit/76fbde2575697663716d97078616c4ab15dc7775)
:   nfs: use user credentials to perform proxy-I/O

[549237caf6](https://github.com/dcache/dcache/commit/549237caf6a6b008bed2b532c21e9d25ee35dccb)
:   pool: add command line to check the correctness of online replica having sticky bit

[6c1074f5c4](https://github.com/dcache/dcache/commit/6c1074f5c460823f2c2b73ff0f740915f64868e9)
:   transfermanagers: complete removal of DB support

[88ac1d0cea](https://github.com/dcache/dcache/commit/88ac1d0cea2a371eafea0168637433d295629061)
:   Reapply "libs: update jackson to version 2.18.3"

[48d3b549ff](https://github.com/dcache/dcache/commit/48d3b549ffc143ca3b6671c3dca63d589a8bffdd)
:   gplazma: ldap make search base DNs more flexible

[48df33385f](https://github.com/dcache/dcache/commit/48df33385ff9ab5d80743e6964ee0ce0035cf634)
:   ci: use java21 build images

[3560e86630](https://github.com/dcache/dcache/commit/3560e866308957dbeb8cbe40dfa5d8917117c6b7)
:   qos: frontend tests for qos transition

[d5d76b4a2b](https://github.com/dcache/dcache/commit/d5d76b4a2b9db57045a509d8d508eeda710b62f8)
:   pool: merge MoverFactory interface into TransferService

[831145ae2c](https://github.com/dcache/dcache/commit/831145ae2c0a9c23dfe936ecd933de8c1ba54429)
:   pool: fix mover's local endpoint reported by a mover

[fc3faf12ef](https://github.com/dcache/dcache/commit/fc3faf12ef8de2a46612f771b815a3bbe0b6765a)
:   qos: frontend tests for qos transition

[7819d3a980](https://github.com/dcache/dcache/commit/7819d3a9804d90c466941506dab60ded32f90618)
:   book: document 'role' configuration option of omnisession plugin

[e7d2304abf](https://github.com/dcache/dcache/commit/e7d2304abfe1e469ab88e57d09ccdb996b5608bc)
:   src: use Java17 HexFormat instead of guava alternative

[a501b3da33](https://github.com/dcache/dcache/commit/a501b3da331521b7fd6d33b135d2981303d3bccb)
:   xroot: don't reply with OK on PrepareRequest

[96a88e6efe](https://github.com/dcache/dcache/commit/96a88e6efe26fd43eaa3a97524bf711ce6429165)
:   ci: add qos policy endpoint tests to the gitlab pipeline

[6ca0a2ed58](https://github.com/dcache/dcache/commit/6ca0a2ed58f418a037780a511fdf2a9207a91e15)
:   common: remove unused constructor

[dcdf855975](https://github.com/dcache/dcache/commit/dcdf85597599034d16b7c12f59890d90a13119c7)
:   ci: fix path to custom helm config

[6f3b040aa7](https://github.com/dcache/dcache/commit/6f3b040aa7fa895e902c76adaf5c6502c4d7fd36)
:   ci: customize helm for CI

[e2f575e2af](https://github.com/dcache/dcache/commit/e2f575e2af42f28fec7654b104a7ebfb747a6fb9)
:   build(deps): bump org.bouncycastle:bcpkix-jdk18on from 1.78.1 to 1.79

[c4139c7e7f](https://github.com/dcache/dcache/commit/c4139c7e7f75ee1a73e515e1963b51ca8bfaee2f)
:   ci: update assertion message for all frontend tests

[635c15cbd5](https://github.com/dcache/dcache/commit/635c15cbd5e636e868fe3f7af73963b240444e0d)
:   dcache: enforce rate limiting only for authentication errors

[2c5e92cbc8](https://github.com/dcache/dcache/commit/2c5e92cbc86535596889073c1dd696e620696174)
:   docs: fix references to old 'cleaner' service

[f3aab0de2b](https://github.com/dcache/dcache/commit/f3aab0de2b2aa37a6ad43c626a565a0e8717ef77)
:   pool: log at warn when files state in pool change

[dd5ae2d7d8](https://github.com/dcache/dcache/commit/dd5ae2d7d8aa21938f444d4b5a0c5d17c969f6f7)
:   utils: update  ExceptionsTests to correctly handle java 19+

[341c77e65f](https://github.com/dcache/dcache/commit/341c77e65fb3a607a66b4b28a7ec8de561d24b82)
:   pnfsmanager: don't use guava's ListenableFuture to notify flush listeners

[7b348be0df](https://github.com/dcache/dcache/commit/7b348be0df0a83a4f88e701f07fade7e0200ffd0)
:   pom: update test dependencies

[cb8cb0924e](https://github.com/dcache/dcache/commit/cb8cb0924ea3de6f07ccb336b498b3e537ad38fa)
:   ci: rewriting qos-policy endpoint tests

[c49820e441](https://github.com/dcache/dcache/commit/c49820e4418a5e790ce1f1eed41c2431050cda01)
:   gplazma: enforce RolePrincipal if Role attribute is set

[fe4d1896ed](https://github.com/dcache/dcache/commit/fe4d1896ed0428db0abee69ace3bd42545a9aac1)
:   nfs: lower nfs-client workaround message

[2e630594af](https://github.com/dcache/dcache/commit/2e630594afc58b651113825198cfb616070e10b5)
:   ci: use chainguard-dev version of kaniko

[d68c5cfd40](https://github.com/dcache/dcache/commit/d68c5cfd406eff9c413a26ddb3e3d3d134fa1463)
:   test: drop snicked system.out.print

[cd23f595bd](https://github.com/dcache/dcache/commit/cd23f595bdb4d5d5d6c88ca179cac392ed9ab7fc)
:   poolmanager: fix wrandom partition

[a25afab99e](https://github.com/dcache/dcache/commit/a25afab99ecb207dca64f02fac59705a722c1c43)
:   build: fix missing resources caused by specification of resources

[eef720e567](https://github.com/dcache/dcache/commit/eef720e567a3bb51c1b6b0758fb06504688494bd)
:   dcache: fix use of vulnerable deserialization methods in test

[8e7c5b63eb](https://github.com/dcache/dcache/commit/8e7c5b63ebc888315f9383cc716c2c8f775762a9)
:   frontend: introduce request rate limter to frontend

[fbeba80b26](https://github.com/dcache/dcache/commit/fbeba80b2674bb3d1487e31a0571854e422f9e8f)
:   build: remove vestigial SMC configuration from `pom.xml` files

[5d54e52624](https://github.com/dcache/dcache/commit/5d54e52624c11a9e3df8db86443da48620dc4b09)
:   build: Update SMC library and corresponding maven plugin

[39c7320a0b](https://github.com/dcache/dcache/commit/39c7320a0b152ebf395bf88c280c5432103ac2d6)
:   build : fix hysteresis with system-test

[c74e8e4d39](https://github.com/dcache/dcache/commit/c74e8e4d39a3d87eef6b1bdc3568f98ab0c16d98)
:   build: Update surefire and configure to redirect test output

[b2344ec153](https://github.com/dcache/dcache/commit/b2344ec153923c1881a59e5d681d8a1c5fac51b3)
:   pool: extract comparator creation to function in IoQueueManager

[8a75cc1749](https://github.com/dcache/dcache/commit/8a75cc1749b90467277149dd3487270451c502df)
:   Revert "Minor typo in comment"

[1bd3809d12](https://github.com/dcache/dcache/commit/1bd3809d12f042a24d44967fc375e33f3aaf113f)
:   Revert "IDE-suggested drive-by: extract comparator creation"

[c25a037df2](https://github.com/dcache/dcache/commit/c25a037df2f16d3baba597d20dea7ca8cacb7aa3)
:   IDE-suggested drive-by: extract comparator creation

[4b6410b438](https://github.com/dcache/dcache/commit/4b6410b4382bed9f7c6276d4622c99bdff54d209)
:   Minor typo in comment

[3f6d72a1f4](https://github.com/dcache/dcache/commit/3f6d72a1f40d0aa800434f30643ba612e13515fa)
:   jetty: introduce request rate limiter

[f8ff33abbf](https://github.com/dcache/dcache/commit/f8ff33abbf5d0ae9b453407f5a45474b22d4fa48)
:   omnisessio: accept tabs in config file

[c08a1bdfa7](https://github.com/dcache/dcache/commit/c08a1bdfa7f8ac4aa142ecd4ced00c15cc8779d3)
:   BUILDING.md: update how start the container

[4030e00e8d](https://github.com/dcache/dcache/commit/4030e00e8d59da2b1fd213c301d5a3348f093a7a)
:   [maven-release-plugin] prepare for next development iteration

[4b771ef3f9](https://github.com/dcache/dcache/commit/4b771ef3f9f4820e4e7be682dad017a23dcb87fd)
:   Update JsonWebToken.java

[5155d12c7d](https://github.com/dcache/dcache/commit/5155d12c7d3edd16630ea1149553aa86888e68d0)
:   Update JsonWebToken.java

[6e5c91b36e](https://github.com/dcache/dcache/commit/6e5c91b36ef239e31fa2d2845913662607d2a1c8)
:   Update JsonWebToken.java

[02e99fc200](https://github.com/dcache/dcache/commit/02e99fc200abaa16b46e388bb5c73f8323a5978a)
:   Update JsonWebToken.java

[2d22189329](https://github.com/dcache/dcache/commit/2d22189329337d267c743cd9ef5fce546fc78497)
:   Update JsonWebToken.java

[0992f8bda5](https://github.com/dcache/dcache/commit/0992f8bda5660ca6c667b6531cfa686990c95e59)
:   add support for EC Public Keys





</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
